<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>10 Stacked Model with Decision Tree (SM) | Indirect Obesity Forecasting</title>
  <meta name="description" content="This is our team project for TO628. In this project, we are exploring innovative predictive analytics methods to assess and manage obesity in the context of potential government-imposed BMI usage restrictions. Utilizing the Proxy Health Evaluation System (PHES), our approach circumvents these potential limitations, providing health insurance companies and medical professionals with essential insights to develop proactive health programs and enhance patient outcomes." />
  <meta name="generator" content="bookdown 0.39 and GitBook 2.6.7" />

  <meta property="og:title" content="10 Stacked Model with Decision Tree (SM) | Indirect Obesity Forecasting" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This is our team project for TO628. In this project, we are exploring innovative predictive analytics methods to assess and manage obesity in the context of potential government-imposed BMI usage restrictions. Utilizing the Proxy Health Evaluation System (PHES), our approach circumvents these potential limitations, providing health insurance companies and medical professionals with essential insights to develop proactive health programs and enhance patient outcomes." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="10 Stacked Model with Decision Tree (SM) | Indirect Obesity Forecasting" />
  
  <meta name="twitter:description" content="This is our team project for TO628. In this project, we are exploring innovative predictive analytics methods to assess and manage obesity in the context of potential government-imposed BMI usage restrictions. Utilizing the Proxy Health Evaluation System (PHES), our approach circumvents these potential limitations, providing health insurance companies and medical professionals with essential insights to develop proactive health programs and enhance patient outcomes." />
  

<meta name="author" content="Aaron Zhao" />
<meta name="author" content="Arneet Singh" />
<meta name="author" content="Blake Waldman" />
<meta name="author" content="Grace Coleman" />
<meta name="author" content="Tyler James Phillips" />
<meta name="author" content="Yousuf Altameemi" />


<meta name="date" content="2024-04-18" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="xgboost-xgb.html"/>
<link rel="next" href="conclusion.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="toc-logo"><a href="./"><img src="_bookdown_files/to_628_hidden_image2.jpg" 
alt="TO 628 Group Project" 
title="TO 628 Group Project" style="width:100%;"></a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#dataset-overview"><i class="fa fa-check"></i>Dataset Overview</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#audience-and-impact"><i class="fa fa-check"></i>Audience and Impact</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#challenges-in-health-insurance"><i class="fa fa-check"></i>Challenges in Health Insurance</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#medical-professional-engagement"><i class="fa fa-check"></i>Medical Professional Engagement</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#research-questions"><i class="fa fa-check"></i>Research Questions</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#adoption-and-implementation"><i class="fa fa-check"></i>Adoption and Implementation</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#strategic-impact"><i class="fa fa-check"></i>Strategic Impact</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="initial-analysis.html"><a href="initial-analysis.html"><i class="fa fa-check"></i><b>2</b> Initial Analysis</a>
<ul>
<li class="chapter" data-level="2.1" data-path="initial-analysis.html"><a href="initial-analysis.html#load-data"><i class="fa fa-check"></i><b>2.1</b> Load Data</a></li>
<li class="chapter" data-level="2.2" data-path="initial-analysis.html"><a href="initial-analysis.html#clean-data"><i class="fa fa-check"></i><b>2.2</b> Clean Data</a></li>
<li class="chapter" data-level="2.3" data-path="initial-analysis.html"><a href="initial-analysis.html#feature-engineering"><i class="fa fa-check"></i><b>2.3</b> Feature Engineering</a></li>
<li class="chapter" data-level="2.4" data-path="initial-analysis.html"><a href="initial-analysis.html#visualize-data"><i class="fa fa-check"></i><b>2.4</b> Visualize Data</a></li>
<li class="chapter" data-level="2.5" data-path="initial-analysis.html"><a href="initial-analysis.html#split-data"><i class="fa fa-check"></i><b>2.5</b> Split Data</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="initial-analysis.html"><a href="initial-analysis.html#split-train-test"><i class="fa fa-check"></i><b>2.5.1</b> Split Train Test</a></li>
<li class="chapter" data-level="2.5.2" data-path="initial-analysis.html"><a href="initial-analysis.html#split-lr"><i class="fa fa-check"></i><b>2.5.2</b> Split LR</a></li>
<li class="chapter" data-level="2.5.3" data-path="initial-analysis.html"><a href="initial-analysis.html#split-dt"><i class="fa fa-check"></i><b>2.5.3</b> Split DT</a></li>
<li class="chapter" data-level="2.5.4" data-path="initial-analysis.html"><a href="initial-analysis.html#split-svm"><i class="fa fa-check"></i><b>2.5.4</b> Split SVM</a></li>
<li class="chapter" data-level="2.5.5" data-path="initial-analysis.html"><a href="initial-analysis.html#split-rf"><i class="fa fa-check"></i><b>2.5.5</b> Split RF</a></li>
<li class="chapter" data-level="2.5.6" data-path="initial-analysis.html"><a href="initial-analysis.html#split-xgb"><i class="fa fa-check"></i><b>2.5.6</b> Split XGB</a></li>
<li class="chapter" data-level="2.5.7" data-path="initial-analysis.html"><a href="initial-analysis.html#split-ann"><i class="fa fa-check"></i><b>2.5.7</b> Split ANN</a></li>
<li class="chapter" data-level="2.5.8" data-path="initial-analysis.html"><a href="initial-analysis.html#split-knn"><i class="fa fa-check"></i><b>2.5.8</b> Split KNN</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="logistic-regression-lr.html"><a href="logistic-regression-lr.html"><i class="fa fa-check"></i><b>3</b> Logistic Regression (LR)</a>
<ul>
<li class="chapter" data-level="3.1" data-path="logistic-regression-lr.html"><a href="logistic-regression-lr.html#introduction-1"><i class="fa fa-check"></i><b>3.1</b> Introduction</a></li>
<li class="chapter" data-level="3.2" data-path="logistic-regression-lr.html"><a href="logistic-regression-lr.html#load-data-1"><i class="fa fa-check"></i><b>3.2</b> Load Data</a></li>
<li class="chapter" data-level="3.3" data-path="logistic-regression-lr.html"><a href="logistic-regression-lr.html#model-lr"><i class="fa fa-check"></i><b>3.3</b> Model LR</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="logistic-regression-lr.html"><a href="logistic-regression-lr.html#simple-lr"><i class="fa fa-check"></i><b>3.3.1</b> Simple LR</a></li>
<li class="chapter" data-level="3.3.2" data-path="logistic-regression-lr.html"><a href="logistic-regression-lr.html#complex-lr"><i class="fa fa-check"></i><b>3.3.2</b> Complex LR</a></li>
<li class="chapter" data-level="3.3.3" data-path="logistic-regression-lr.html"><a href="logistic-regression-lr.html#stepwise-lr"><i class="fa fa-check"></i><b>3.3.3</b> Stepwise LR</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="logistic-regression-lr.html"><a href="logistic-regression-lr.html#evaluate-lr"><i class="fa fa-check"></i><b>3.4</b> Evaluate LR</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="logistic-regression-lr.html"><a href="logistic-regression-lr.html#simple-lr-1"><i class="fa fa-check"></i><b>3.4.1</b> Simple LR</a></li>
<li class="chapter" data-level="3.4.2" data-path="logistic-regression-lr.html"><a href="logistic-regression-lr.html#complex-lr-1"><i class="fa fa-check"></i><b>3.4.2</b> Complex LR</a></li>
<li class="chapter" data-level="3.4.3" data-path="logistic-regression-lr.html"><a href="logistic-regression-lr.html#stepwise-lr-1"><i class="fa fa-check"></i><b>3.4.3</b> Stepwise LR</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="artificial-neural-network-ann.html"><a href="artificial-neural-network-ann.html"><i class="fa fa-check"></i><b>4</b> Artificial Neural Network (ANN)</a>
<ul>
<li class="chapter" data-level="4.1" data-path="artificial-neural-network-ann.html"><a href="artificial-neural-network-ann.html#introduction-2"><i class="fa fa-check"></i><b>4.1</b> Introduction</a></li>
<li class="chapter" data-level="4.2" data-path="artificial-neural-network-ann.html"><a href="artificial-neural-network-ann.html#load-data-2"><i class="fa fa-check"></i><b>4.2</b> Load Data</a></li>
<li class="chapter" data-level="4.3" data-path="artificial-neural-network-ann.html"><a href="artificial-neural-network-ann.html#model-ann"><i class="fa fa-check"></i><b>4.3</b> Model ANN</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="artificial-neural-network-ann.html"><a href="artificial-neural-network-ann.html#simple-ann"><i class="fa fa-check"></i><b>4.3.1</b> Simple ANN</a></li>
<li class="chapter" data-level="4.3.2" data-path="artificial-neural-network-ann.html"><a href="artificial-neural-network-ann.html#complex-ann"><i class="fa fa-check"></i><b>4.3.2</b> Complex ANN</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="artificial-neural-network-ann.html"><a href="artificial-neural-network-ann.html#evaluate-ann"><i class="fa fa-check"></i><b>4.4</b> Evaluate ANN</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="artificial-neural-network-ann.html"><a href="artificial-neural-network-ann.html#simple-ann-1"><i class="fa fa-check"></i><b>4.4.1</b> Simple ANN</a></li>
<li class="chapter" data-level="4.4.2" data-path="artificial-neural-network-ann.html"><a href="artificial-neural-network-ann.html#complex-ann-1"><i class="fa fa-check"></i><b>4.4.2</b> Complex ANN</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="k-neareast-neighbor-knn.html"><a href="k-neareast-neighbor-knn.html"><i class="fa fa-check"></i><b>5</b> K-Neareast Neighbor (KNN)</a>
<ul>
<li class="chapter" data-level="5.1" data-path="k-neareast-neighbor-knn.html"><a href="k-neareast-neighbor-knn.html#introduction-3"><i class="fa fa-check"></i><b>5.1</b> Introduction</a></li>
<li class="chapter" data-level="5.2" data-path="k-neareast-neighbor-knn.html"><a href="k-neareast-neighbor-knn.html#load-data-3"><i class="fa fa-check"></i><b>5.2</b> Load Data</a></li>
<li class="chapter" data-level="5.3" data-path="k-neareast-neighbor-knn.html"><a href="k-neareast-neighbor-knn.html#model-knn"><i class="fa fa-check"></i><b>5.3</b> Model KNN</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="k-neareast-neighbor-knn.html"><a href="k-neareast-neighbor-knn.html#default-knn"><i class="fa fa-check"></i><b>5.3.1</b> Default KNN</a></li>
<li class="chapter" data-level="5.3.2" data-path="k-neareast-neighbor-knn.html"><a href="k-neareast-neighbor-knn.html#tuned-knn"><i class="fa fa-check"></i><b>5.3.2</b> Tuned KNN</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="k-neareast-neighbor-knn.html"><a href="k-neareast-neighbor-knn.html#evaluate-knn"><i class="fa fa-check"></i><b>5.4</b> Evaluate KNN</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="k-neareast-neighbor-knn.html"><a href="k-neareast-neighbor-knn.html#default-knn-1"><i class="fa fa-check"></i><b>5.4.1</b> Default KNN</a></li>
<li class="chapter" data-level="5.4.2" data-path="k-neareast-neighbor-knn.html"><a href="k-neareast-neighbor-knn.html#tuned-knn-1"><i class="fa fa-check"></i><b>5.4.2</b> Tuned KNN</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="decision-tree-dt.html"><a href="decision-tree-dt.html"><i class="fa fa-check"></i><b>6</b> Decision Tree (DT)</a>
<ul>
<li class="chapter" data-level="" data-path="decision-tree-dt.html"><a href="decision-tree-dt.html#r-packages-and-setup"><i class="fa fa-check"></i>R Packages and Setup</a></li>
<li class="chapter" data-level="6.1" data-path="decision-tree-dt.html"><a href="decision-tree-dt.html#introduction-4"><i class="fa fa-check"></i><b>6.1</b> Introduction</a></li>
<li class="chapter" data-level="6.2" data-path="decision-tree-dt.html"><a href="decision-tree-dt.html#load-data-4"><i class="fa fa-check"></i><b>6.2</b> Load Data</a></li>
<li class="chapter" data-level="6.3" data-path="decision-tree-dt.html"><a href="decision-tree-dt.html#model-dt"><i class="fa fa-check"></i><b>6.3</b> Model DT</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="decision-tree-dt.html"><a href="decision-tree-dt.html#simple-dt"><i class="fa fa-check"></i><b>6.3.1</b> Simple DT</a></li>
<li class="chapter" data-level="6.3.2" data-path="decision-tree-dt.html"><a href="decision-tree-dt.html#dt-with-cost-matrix"><i class="fa fa-check"></i><b>6.3.2</b> DT with Cost Matrix</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="decision-tree-dt.html"><a href="decision-tree-dt.html#evaluate-dt"><i class="fa fa-check"></i><b>6.4</b> Evaluate DT</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="decision-tree-dt.html"><a href="decision-tree-dt.html#simple-dt-1"><i class="fa fa-check"></i><b>6.4.1</b> Simple DT</a></li>
<li class="chapter" data-level="6.4.2" data-path="decision-tree-dt.html"><a href="decision-tree-dt.html#dt-with-cost-matrix-1"><i class="fa fa-check"></i><b>6.4.2</b> DT with Cost Matrix</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="support-vector-machine-svm.html"><a href="support-vector-machine-svm.html"><i class="fa fa-check"></i><b>7</b> Support Vector Machine (SVM)</a>
<ul>
<li class="chapter" data-level="" data-path="support-vector-machine-svm.html"><a href="support-vector-machine-svm.html#r-packages-and-setup-1"><i class="fa fa-check"></i>R Packages and Setup</a></li>
<li class="chapter" data-level="7.1" data-path="support-vector-machine-svm.html"><a href="support-vector-machine-svm.html#introduction-5"><i class="fa fa-check"></i><b>7.1</b> Introduction</a></li>
<li class="chapter" data-level="7.2" data-path="support-vector-machine-svm.html"><a href="support-vector-machine-svm.html#load-data-5"><i class="fa fa-check"></i><b>7.2</b> Load Data</a></li>
<li class="chapter" data-level="7.3" data-path="support-vector-machine-svm.html"><a href="support-vector-machine-svm.html#model-svm"><i class="fa fa-check"></i><b>7.3</b> Model SVM</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="support-vector-machine-svm.html"><a href="support-vector-machine-svm.html#vanilla-svm"><i class="fa fa-check"></i><b>7.3.1</b> Vanilla SVM</a></li>
<li class="chapter" data-level="7.3.2" data-path="support-vector-machine-svm.html"><a href="support-vector-machine-svm.html#rbf-svm"><i class="fa fa-check"></i><b>7.3.2</b> RBF SVM</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="support-vector-machine-svm.html"><a href="support-vector-machine-svm.html#evaluate-svm"><i class="fa fa-check"></i><b>7.4</b> Evaluate SVM</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="support-vector-machine-svm.html"><a href="support-vector-machine-svm.html#vanilla-svm-1"><i class="fa fa-check"></i><b>7.4.1</b> Vanilla SVM</a></li>
<li class="chapter" data-level="7.4.2" data-path="support-vector-machine-svm.html"><a href="support-vector-machine-svm.html#rbf-svm-1"><i class="fa fa-check"></i><b>7.4.2</b> RBF SVM</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="random-forest-rf.html"><a href="random-forest-rf.html"><i class="fa fa-check"></i><b>8</b> Random Forest (RF)</a>
<ul>
<li class="chapter" data-level="" data-path="random-forest-rf.html"><a href="random-forest-rf.html#r-packages-and-setup-2"><i class="fa fa-check"></i>R Packages and Setup</a></li>
<li class="chapter" data-level="8.1" data-path="random-forest-rf.html"><a href="random-forest-rf.html#introduction-6"><i class="fa fa-check"></i><b>8.1</b> Introduction</a></li>
<li class="chapter" data-level="8.2" data-path="random-forest-rf.html"><a href="random-forest-rf.html#load-data-6"><i class="fa fa-check"></i><b>8.2</b> Load Data</a></li>
<li class="chapter" data-level="8.3" data-path="random-forest-rf.html"><a href="random-forest-rf.html#model-rf"><i class="fa fa-check"></i><b>8.3</b> Model RF</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="random-forest-rf.html"><a href="random-forest-rf.html#simple-rf"><i class="fa fa-check"></i><b>8.3.1</b> Simple RF</a></li>
<li class="chapter" data-level="8.3.2" data-path="random-forest-rf.html"><a href="random-forest-rf.html#tuned-rf"><i class="fa fa-check"></i><b>8.3.2</b> Tuned RF</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="random-forest-rf.html"><a href="random-forest-rf.html#evaluate-rf"><i class="fa fa-check"></i><b>8.4</b> Evaluate RF</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="random-forest-rf.html"><a href="random-forest-rf.html#simple-rf-1"><i class="fa fa-check"></i><b>8.4.1</b> Simple RF</a></li>
<li class="chapter" data-level="8.4.2" data-path="random-forest-rf.html"><a href="random-forest-rf.html#tuned-rf-1"><i class="fa fa-check"></i><b>8.4.2</b> Tuned RF</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="xgboost-xgb.html"><a href="xgboost-xgb.html"><i class="fa fa-check"></i><b>9</b> XGBoost (XGB)</a>
<ul>
<li class="chapter" data-level="9.1" data-path="xgboost-xgb.html"><a href="xgboost-xgb.html#introduction-7"><i class="fa fa-check"></i><b>9.1</b> Introduction</a></li>
<li class="chapter" data-level="9.2" data-path="xgboost-xgb.html"><a href="xgboost-xgb.html#load-data-7"><i class="fa fa-check"></i><b>9.2</b> Load Data</a></li>
<li class="chapter" data-level="9.3" data-path="xgboost-xgb.html"><a href="xgboost-xgb.html#model-xgb"><i class="fa fa-check"></i><b>9.3</b> Model XGB</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="xgboost-xgb.html"><a href="xgboost-xgb.html#simple-xgb"><i class="fa fa-check"></i><b>9.3.1</b> Simple XGB</a></li>
<li class="chapter" data-level="9.3.2" data-path="xgboost-xgb.html"><a href="xgboost-xgb.html#tuned-xgb"><i class="fa fa-check"></i><b>9.3.2</b> Tuned XGB</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="xgboost-xgb.html"><a href="xgboost-xgb.html#evaluate-xgb"><i class="fa fa-check"></i><b>9.4</b> Evaluate XGB</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="xgboost-xgb.html"><a href="xgboost-xgb.html#simple-xgb-1"><i class="fa fa-check"></i><b>9.4.1</b> Simple XGB</a></li>
<li class="chapter" data-level="9.4.2" data-path="xgboost-xgb.html"><a href="xgboost-xgb.html#tuned-xgb-1"><i class="fa fa-check"></i><b>9.4.2</b> Tuned XGB</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="stacked-model-with-decision-tree-sm.html"><a href="stacked-model-with-decision-tree-sm.html"><i class="fa fa-check"></i><b>10</b> Stacked Model with Decision Tree (SM)</a>
<ul>
<li class="chapter" data-level="" data-path="stacked-model-with-decision-tree-sm.html"><a href="stacked-model-with-decision-tree-sm.html#r-packages-and-setup-3"><i class="fa fa-check"></i>R Packages and Setup</a></li>
<li class="chapter" data-level="10.1" data-path="stacked-model-with-decision-tree-sm.html"><a href="stacked-model-with-decision-tree-sm.html#introduction-8"><i class="fa fa-check"></i><b>10.1</b> Introduction</a></li>
<li class="chapter" data-level="10.2" data-path="stacked-model-with-decision-tree-sm.html"><a href="stacked-model-with-decision-tree-sm.html#load-data-8"><i class="fa fa-check"></i><b>10.2</b> Load Data</a></li>
<li class="chapter" data-level="10.3" data-path="stacked-model-with-decision-tree-sm.html"><a href="stacked-model-with-decision-tree-sm.html#split-data-1"><i class="fa fa-check"></i><b>10.3</b> Split Data</a></li>
<li class="chapter" data-level="10.4" data-path="stacked-model-with-decision-tree-sm.html"><a href="stacked-model-with-decision-tree-sm.html#define-cost-matrix"><i class="fa fa-check"></i><b>10.4</b> Define Cost Matrix</a></li>
<li class="chapter" data-level="10.5" data-path="stacked-model-with-decision-tree-sm.html"><a href="stacked-model-with-decision-tree-sm.html#model-sm"><i class="fa fa-check"></i><b>10.5</b> Model SM</a>
<ul>
<li class="chapter" data-level="10.5.1" data-path="stacked-model-with-decision-tree-sm.html"><a href="stacked-model-with-decision-tree-sm.html#simple-sm"><i class="fa fa-check"></i><b>10.5.1</b> Simple SM</a></li>
<li class="chapter" data-level="10.5.2" data-path="stacked-model-with-decision-tree-sm.html"><a href="stacked-model-with-decision-tree-sm.html#sm-with-cost-matrix"><i class="fa fa-check"></i><b>10.5.2</b> SM with Cost Matrix</a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="stacked-model-with-decision-tree-sm.html"><a href="stacked-model-with-decision-tree-sm.html#evaluate-sm"><i class="fa fa-check"></i><b>10.6</b> Evaluate SM</a>
<ul>
<li class="chapter" data-level="10.6.1" data-path="stacked-model-with-decision-tree-sm.html"><a href="stacked-model-with-decision-tree-sm.html#simple-sm-1"><i class="fa fa-check"></i><b>10.6.1</b> Simple SM</a></li>
<li class="chapter" data-level="10.6.2" data-path="stacked-model-with-decision-tree-sm.html"><a href="stacked-model-with-decision-tree-sm.html#sm-with-cost-matrix-1"><i class="fa fa-check"></i><b>10.6.2</b> SM with Cost Matrix</a></li>
</ul></li>
<li class="chapter" data-level="10.7" data-path="stacked-model-with-decision-tree-sm.html"><a href="stacked-model-with-decision-tree-sm.html#model-evaluations"><i class="fa fa-check"></i><b>10.7</b> Model Evaluations</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>11</b> Conclusion</a>
<ul>
<li class="chapter" data-level="11.1" data-path="conclusion.html"><a href="conclusion.html#takeaways"><i class="fa fa-check"></i><b>11.1</b> Takeaways</a></li>
<li class="chapter" data-level="11.2" data-path="conclusion.html"><a href="conclusion.html#business-impact"><i class="fa fa-check"></i><b>11.2</b> Business Impact</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://michiganross.umich.edu/courses/advanced-big-data-analytics-10562">About The Course</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Indirect Obesity Forecasting</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="stacked-model-with-decision-tree-sm" class="section level1 hasAnchor" number="10">
<h1><span class="header-section-number">10</span> Stacked Model with Decision Tree (SM)<a href="stacked-model-with-decision-tree-sm.html#stacked-model-with-decision-tree-sm" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="r-packages-and-setup-3" class="section level2 unnumbered hasAnchor">
<h2>R Packages and Setup<a href="stacked-model-with-decision-tree-sm.html#r-packages-and-setup-3" class="anchor-section" aria-label="Anchor link to header"></a></h2>
</div>
<div id="introduction-8" class="section level2 hasAnchor" number="10.1">
<h2><span class="header-section-number">10.1</span> Introduction<a href="stacked-model-with-decision-tree-sm.html#introduction-8" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>After completing all assigned model builds, we will construct a two-stage stacked ensemble.</p>
<p>In the initial stage, we will employ solely the fundamental L1 models as base learners.</p>
<p>In the subsequent stage, we will integrate all complex L1 models like the advanced LR and fine-tuned RF into the base learner set. Our primary objective is to maximize the predictive precision of the base models provided by L1 models through a multi-level stacked ensemble approach.</p>
</div>
<div id="load-data-8" class="section level2 hasAnchor" number="10.2">
<h2><span class="header-section-number">10.2</span> Load Data<a href="stacked-model-with-decision-tree-sm.html#load-data-8" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb205"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb205-1"><a href="stacked-model-with-decision-tree-sm.html#cb205-1" tabindex="-1"></a><span class="co"># Load data</span></span>
<span id="cb205-2"><a href="stacked-model-with-decision-tree-sm.html#cb205-2" tabindex="-1"></a>test <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&#39;Train Test Set/test.csv&#39;</span>)</span>
<span id="cb205-3"><a href="stacked-model-with-decision-tree-sm.html#cb205-3" tabindex="-1"></a>lr <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&#39;Predictions/prediction_lr_probability.csv&#39;</span>)</span>
<span id="cb205-4"><a href="stacked-model-with-decision-tree-sm.html#cb205-4" tabindex="-1"></a>lr_complex <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&#39;Predictions/prediction_lr_complex_probability.csv&#39;</span>)</span>
<span id="cb205-5"><a href="stacked-model-with-decision-tree-sm.html#cb205-5" tabindex="-1"></a>knn <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&#39;Predictions/prediction_knn_probability.csv&#39;</span>)</span>
<span id="cb205-6"><a href="stacked-model-with-decision-tree-sm.html#cb205-6" tabindex="-1"></a>knn_tuned <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&#39;Predictions/prediction_knn_tuned_probability.csv&#39;</span>)</span>
<span id="cb205-7"><a href="stacked-model-with-decision-tree-sm.html#cb205-7" tabindex="-1"></a>ann <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&#39;Predictions/prediction_ann_probability.csv&#39;</span>)</span>
<span id="cb205-8"><a href="stacked-model-with-decision-tree-sm.html#cb205-8" tabindex="-1"></a>ann_complex <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&#39;Predictions/prediction_ann_complex_probability.csv&#39;</span>)</span>
<span id="cb205-9"><a href="stacked-model-with-decision-tree-sm.html#cb205-9" tabindex="-1"></a>dt <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&#39;Predictions/prediction_dt.csv&#39;</span>)</span>
<span id="cb205-10"><a href="stacked-model-with-decision-tree-sm.html#cb205-10" tabindex="-1"></a>dt_cost <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&#39;Predictions/prediction_dt_cost.csv&#39;</span>)</span>
<span id="cb205-11"><a href="stacked-model-with-decision-tree-sm.html#cb205-11" tabindex="-1"></a>svm_vanilla <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&#39;Predictions/prediction_svm_vanilla.csv&#39;</span>)</span>
<span id="cb205-12"><a href="stacked-model-with-decision-tree-sm.html#cb205-12" tabindex="-1"></a>svm_rbf <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&#39;Predictions/prediction_svm_rbf.csv&#39;</span>)</span>
<span id="cb205-13"><a href="stacked-model-with-decision-tree-sm.html#cb205-13" tabindex="-1"></a>rf <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&#39;Predictions/prediction_rf.csv&#39;</span>)</span>
<span id="cb205-14"><a href="stacked-model-with-decision-tree-sm.html#cb205-14" tabindex="-1"></a>rf_tuned <span class="ot">&lt;-</span><span class="fu">read.csv</span>(<span class="st">&#39;Predictions/prediction_rf_tuned.csv&#39;</span>)</span>
<span id="cb205-15"><a href="stacked-model-with-decision-tree-sm.html#cb205-15" tabindex="-1"></a>xgb <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&#39;Predictions/prediction_xgb_probability.csv&#39;</span>)</span>
<span id="cb205-16"><a href="stacked-model-with-decision-tree-sm.html#cb205-16" tabindex="-1"></a>xgb_tuned <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&#39;Predictions/prediction_xgb_tuned.csv&#39;</span>)</span>
<span id="cb205-17"><a href="stacked-model-with-decision-tree-sm.html#cb205-17" tabindex="-1"></a></span>
<span id="cb205-18"><a href="stacked-model-with-decision-tree-sm.html#cb205-18" tabindex="-1"></a></span>
<span id="cb205-19"><a href="stacked-model-with-decision-tree-sm.html#cb205-19" tabindex="-1"></a><span class="co"># Display statistics</span></span>
<span id="cb205-20"><a href="stacked-model-with-decision-tree-sm.html#cb205-20" tabindex="-1"></a><span class="fu">summary</span>(test)</span></code></pre></div>
<pre><code>##  gender_female     gender_male          age        fam_history_overweight1
##  Min.   :0.0000   Min.   :0.0000   Min.   :14.00   Min.   :0.0000         
##  1st Qu.:0.0000   1st Qu.:0.0000   1st Qu.:20.00   1st Qu.:1.0000         
##  Median :0.0000   Median :1.0000   Median :23.00   Median :1.0000         
##  Mean   :0.4962   Mean   :0.5038   Mean   :23.89   Mean   :0.8216         
##  3rd Qu.:1.0000   3rd Qu.:1.0000   3rd Qu.:26.00   3rd Qu.:1.0000         
##  Max.   :1.0000   Max.   :1.0000   Max.   :56.00   Max.   :1.0000         
##  freq_consumption_hc_food1    veg_freq       num_meals    
##  Min.   :0.0000            Min.   :1.000   Min.   :1.000  
##  1st Qu.:1.0000            1st Qu.:2.000   1st Qu.:3.000  
##  Median :1.0000            Median :2.342   Median :3.000  
##  Mean   :0.9123            Mean   :2.440   Mean   :2.765  
##  3rd Qu.:1.0000            3rd Qu.:3.000   3rd Qu.:3.000  
##  Max.   :1.0000            Max.   :3.000   Max.   :4.000  
##  food_between_meals_frequently food_between_meals_never
##  Min.   :0.000                 Min.   :0.00000         
##  1st Qu.:0.000                 1st Qu.:0.00000         
##  Median :0.000                 Median :0.00000         
##  Mean   :0.117                 Mean   :0.01436         
##  3rd Qu.:0.000                 3rd Qu.:0.00000         
##  Max.   :1.000                 Max.   :1.00000         
##  food_between_meals_sometimes     smoke1         water_daily   
##  Min.   :0.0000               Min.   :0.00000   Min.   :1.000  
##  1st Qu.:1.0000               1st Qu.:0.00000   1st Qu.:1.788  
##  Median :1.0000               Median :0.00000   Median :2.000  
##  Mean   :0.8443               Mean   :0.01137   Mean   :2.030  
##  3rd Qu.:1.0000               3rd Qu.:0.00000   3rd Qu.:2.551  
##  Max.   :1.0000               Max.   :1.00000   Max.   :3.000  
##  caloric_beverages1 activity_freq         tech_use      alcohol_never   
##  Min.   :0.00000    Min.   :0.000000   Min.   :0.0000   Min.   :0.0000  
##  1st Qu.:0.00000    1st Qu.:0.009276   1st Qu.:0.0000   1st Qu.:0.0000  
##  Median :0.00000    Median :1.000000   Median :0.5739   Median :0.0000  
##  Mean   :0.03343    Mean   :0.982525   Mean   :0.6188   Mean   :0.2514  
##  3rd Qu.:0.00000    3rd Qu.:1.592795   3rd Qu.:1.0000   3rd Qu.:1.0000  
##  Max.   :1.00000    Max.   :3.000000   Max.   :2.0000   Max.   :1.0000  
##  alcohol_sometimes transport_bike     transport_motorbike
##  Min.   :0.0000    Min.   :0.000000   Min.   :0.000000   
##  1st Qu.:0.0000    1st Qu.:0.000000   1st Qu.:0.000000   
##  Median :1.0000    Median :0.000000   Median :0.000000   
##  Mean   :0.7227    Mean   :0.001349   Mean   :0.001734   
##  3rd Qu.:1.0000    3rd Qu.:0.000000   3rd Qu.:0.000000   
##  Max.   :1.0000    Max.   :1.000000   Max.   :1.000000   
##  transport_public_transportation transport_walking obesity_leveloverweight
##  Min.   :0.0000                  Min.   :0.00000   Min.   :0.0000         
##  1st Qu.:1.0000                  1st Qu.:0.00000   1st Qu.:0.0000         
##  Median :1.0000                  Median :0.00000   Median :1.0000         
##  Mean   :0.8022                  Mean   :0.02274   Mean   :0.7338         
##  3rd Qu.:1.0000                  3rd Qu.:0.00000   3rd Qu.:1.0000         
##  Max.   :1.0000                  Max.   :1.00000   Max.   :1.0000         
##  eating_habit_binary physical_activity_binary age_group_young_adult
##  Min.   :1.000       Min.   :-2.0000          Min.   :0.000        
##  1st Qu.:2.308       1st Qu.:-0.2696          1st Qu.:1.000        
##  Median :2.333       Median : 0.2844          Median :1.000        
##  Mean   :2.372       Mean   : 0.3638          Mean   :0.901        
##  3rd Qu.:2.667       3rd Qu.: 1.0000          3rd Qu.:1.000        
##  Max.   :3.000       Max.   : 3.0000          Max.   :1.000        
##  age_group_adult   age_group_senior  
##  Min.   :0.00000   Min.   :0.000000  
##  1st Qu.:0.00000   1st Qu.:0.000000  
##  Median :0.00000   Median :0.000000  
##  Mean   :0.05212   Mean   :0.003565  
##  3rd Qu.:0.00000   3rd Qu.:0.000000  
##  Max.   :1.00000   Max.   :1.000000</code></pre>
<div class="sourceCode" id="cb207"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb207-1"><a href="stacked-model-with-decision-tree-sm.html#cb207-1" tabindex="-1"></a><span class="fu">summary</span>(lr)</span></code></pre></div>
<pre><code>##        x         
##  Min.   :0.0023  
##  1st Qu.:0.5783  
##  Median :0.8975  
##  Mean   :0.7329  
##  3rd Qu.:0.9721  
##  Max.   :0.9999</code></pre>
<div class="sourceCode" id="cb209"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb209-1"><a href="stacked-model-with-decision-tree-sm.html#cb209-1" tabindex="-1"></a><span class="fu">summary</span>(lr_complex)</span></code></pre></div>
<pre><code>##        x         
##  Min.   :0.0000  
##  1st Qu.:0.5404  
##  Median :0.9210  
##  Mean   :0.7333  
##  3rd Qu.:0.9855  
##  Max.   :1.0000</code></pre>
<div class="sourceCode" id="cb211"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb211-1"><a href="stacked-model-with-decision-tree-sm.html#cb211-1" tabindex="-1"></a><span class="fu">summary</span>(knn)</span></code></pre></div>
<pre><code>##        x         
##  Min.   :0.5000  
##  1st Qu.:0.7723  
##  Median :0.9109  
##  Mean   :0.8657  
##  3rd Qu.:0.9802  
##  Max.   :1.0000</code></pre>
<div class="sourceCode" id="cb213"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb213-1"><a href="stacked-model-with-decision-tree-sm.html#cb213-1" tabindex="-1"></a><span class="fu">summary</span>(knn_tuned)</span></code></pre></div>
<pre><code>##        x         
##  Min.   :0.5000  
##  1st Qu.:0.7647  
##  Median :0.9375  
##  Mean   :0.8771  
##  3rd Qu.:1.0000  
##  Max.   :1.0000</code></pre>
<div class="sourceCode" id="cb215"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb215-1"><a href="stacked-model-with-decision-tree-sm.html#cb215-1" tabindex="-1"></a><span class="fu">summary</span>(ann)</span></code></pre></div>
<pre><code>##        V1         
##  Min.   :0.08761  
##  1st Qu.:0.53668  
##  Median :0.90047  
##  Mean   :0.73205  
##  3rd Qu.:0.97776  
##  Max.   :1.00227</code></pre>
<div class="sourceCode" id="cb217"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb217-1"><a href="stacked-model-with-decision-tree-sm.html#cb217-1" tabindex="-1"></a><span class="fu">summary</span>(ann_complex)</span></code></pre></div>
<pre><code>##        V1         
##  Min.   :0.04298  
##  1st Qu.:0.51153  
##  Median :0.91891  
##  Mean   :0.73173  
##  3rd Qu.:0.97819  
##  Max.   :0.97998</code></pre>
<div class="sourceCode" id="cb219"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb219-1"><a href="stacked-model-with-decision-tree-sm.html#cb219-1" tabindex="-1"></a><span class="fu">summary</span>(dt)</span></code></pre></div>
<pre><code>##        x         
##  Min.   :0.0000  
##  1st Qu.:1.0000  
##  Median :1.0000  
##  Mean   :0.7505  
##  3rd Qu.:1.0000  
##  Max.   :1.0000</code></pre>
<div class="sourceCode" id="cb221"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb221-1"><a href="stacked-model-with-decision-tree-sm.html#cb221-1" tabindex="-1"></a><span class="fu">summary</span>(dt_cost)</span></code></pre></div>
<pre><code>##        x         
##  Min.   :0.0000  
##  1st Qu.:1.0000  
##  Median :1.0000  
##  Mean   :0.9323  
##  3rd Qu.:1.0000  
##  Max.   :1.0000</code></pre>
<div class="sourceCode" id="cb223"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb223-1"><a href="stacked-model-with-decision-tree-sm.html#cb223-1" tabindex="-1"></a><span class="fu">summary</span>(svm_vanilla)</span></code></pre></div>
<pre><code>##        V1        
##  Min.   :0.0000  
##  1st Qu.:1.0000  
##  Median :1.0000  
##  Mean   :0.8216  
##  3rd Qu.:1.0000  
##  Max.   :1.0000</code></pre>
<div class="sourceCode" id="cb225"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb225-1"><a href="stacked-model-with-decision-tree-sm.html#cb225-1" tabindex="-1"></a><span class="fu">summary</span>(svm_rbf)</span></code></pre></div>
<pre><code>##        V1        
##  Min.   :0.0000  
##  1st Qu.:1.0000  
##  Median :1.0000  
##  Mean   :0.7658  
##  3rd Qu.:1.0000  
##  Max.   :1.0000</code></pre>
<div class="sourceCode" id="cb227"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb227-1"><a href="stacked-model-with-decision-tree-sm.html#cb227-1" tabindex="-1"></a><span class="fu">summary</span>(rf)</span></code></pre></div>
<pre><code>##        x         
##  Min.   :0.0000  
##  1st Qu.:0.0000  
##  Median :1.0000  
##  Mean   :0.7354  
##  3rd Qu.:1.0000  
##  Max.   :1.0000</code></pre>
<div class="sourceCode" id="cb229"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb229-1"><a href="stacked-model-with-decision-tree-sm.html#cb229-1" tabindex="-1"></a><span class="fu">summary</span>(rf_tuned)</span></code></pre></div>
<pre><code>##        x         
##  Min.   :0.0000  
##  1st Qu.:0.0000  
##  Median :1.0000  
##  Mean   :0.7327  
##  3rd Qu.:1.0000  
##  Max.   :1.0000</code></pre>
<div class="sourceCode" id="cb231"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb231-1"><a href="stacked-model-with-decision-tree-sm.html#cb231-1" tabindex="-1"></a><span class="fu">summary</span>(xgb)</span></code></pre></div>
<pre><code>##        x          
##  Min.   :0.03182  
##  1st Qu.:0.46929  
##  Median :0.91454  
##  Mean   :0.72143  
##  3rd Qu.:0.96696  
##  Max.   :0.97641</code></pre>
<div class="sourceCode" id="cb233"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb233-1"><a href="stacked-model-with-decision-tree-sm.html#cb233-1" tabindex="-1"></a><span class="fu">summary</span>(xgb_tuned)</span></code></pre></div>
<pre><code>##        x            
##  Min.   :0.0002856  
##  1st Qu.:0.0034169  
##  Median :0.0383439  
##  Mean   :0.2662891  
##  3rd Qu.:0.5447414  
##  Max.   :0.9967414</code></pre>
<div class="sourceCode" id="cb235"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb235-1"><a href="stacked-model-with-decision-tree-sm.html#cb235-1" tabindex="-1"></a><span class="co"># Combine data</span></span>
<span id="cb235-2"><a href="stacked-model-with-decision-tree-sm.html#cb235-2" tabindex="-1"></a>stacked <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(lr<span class="sc">$</span>x,</span>
<span id="cb235-3"><a href="stacked-model-with-decision-tree-sm.html#cb235-3" tabindex="-1"></a>                      lr_complex<span class="sc">$</span>x,</span>
<span id="cb235-4"><a href="stacked-model-with-decision-tree-sm.html#cb235-4" tabindex="-1"></a>                      knn<span class="sc">$</span>x,</span>
<span id="cb235-5"><a href="stacked-model-with-decision-tree-sm.html#cb235-5" tabindex="-1"></a>                      knn_tuned<span class="sc">$</span>x,</span>
<span id="cb235-6"><a href="stacked-model-with-decision-tree-sm.html#cb235-6" tabindex="-1"></a>                      ann<span class="sc">$</span>V1,</span>
<span id="cb235-7"><a href="stacked-model-with-decision-tree-sm.html#cb235-7" tabindex="-1"></a>                      ann_complex<span class="sc">$</span>V1,</span>
<span id="cb235-8"><a href="stacked-model-with-decision-tree-sm.html#cb235-8" tabindex="-1"></a>                      dt<span class="sc">$</span>x,</span>
<span id="cb235-9"><a href="stacked-model-with-decision-tree-sm.html#cb235-9" tabindex="-1"></a>                      dt_cost<span class="sc">$</span>x,</span>
<span id="cb235-10"><a href="stacked-model-with-decision-tree-sm.html#cb235-10" tabindex="-1"></a>                      svm_vanilla<span class="sc">$</span>V1,</span>
<span id="cb235-11"><a href="stacked-model-with-decision-tree-sm.html#cb235-11" tabindex="-1"></a>                      svm_rbf<span class="sc">$</span>V1,</span>
<span id="cb235-12"><a href="stacked-model-with-decision-tree-sm.html#cb235-12" tabindex="-1"></a>                      rf<span class="sc">$</span>x,</span>
<span id="cb235-13"><a href="stacked-model-with-decision-tree-sm.html#cb235-13" tabindex="-1"></a>                      rf_tuned<span class="sc">$</span>x,</span>
<span id="cb235-14"><a href="stacked-model-with-decision-tree-sm.html#cb235-14" tabindex="-1"></a>                      xgb<span class="sc">$</span>x,</span>
<span id="cb235-15"><a href="stacked-model-with-decision-tree-sm.html#cb235-15" tabindex="-1"></a>                      xgb_tuned<span class="sc">$</span>x,</span>
<span id="cb235-16"><a href="stacked-model-with-decision-tree-sm.html#cb235-16" tabindex="-1"></a>                      test<span class="sc">$</span>obesity_leveloverweight)</span>
<span id="cb235-17"><a href="stacked-model-with-decision-tree-sm.html#cb235-17" tabindex="-1"></a></span>
<span id="cb235-18"><a href="stacked-model-with-decision-tree-sm.html#cb235-18" tabindex="-1"></a><span class="co"># Display statistics</span></span>
<span id="cb235-19"><a href="stacked-model-with-decision-tree-sm.html#cb235-19" tabindex="-1"></a><span class="fu">str</span>(stacked)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    10379 obs. of  15 variables:
##  $ lr.x                        : num  0.973 0.973 0.887 0.85 0.814 ...
##  $ lr_complex.x                : num  0.9923 0.98337 0.9159 0.00328 0.92711 ...
##  $ knn.x                       : num  1 0.98 1 0.554 0.911 ...
##  $ knn_tuned.x                 : num  1 1 1 0.5 1 ...
##  $ ann.V1                      : num  0.967 0.97 0.89 0.92 0.839 ...
##  $ ann_complex.V1              : num  0.974 0.975 0.911 0.943 0.853 ...
##  $ dt.x                        : int  1 1 1 1 1 1 1 0 1 1 ...
##  $ dt_cost.x                   : int  1 1 1 1 1 1 1 1 1 1 ...
##  $ svm_vanilla.V1              : int  1 1 1 1 1 0 1 0 1 1 ...
##  $ svm_rbf.V1                  : int  1 1 1 1 1 0 0 0 1 1 ...
##  $ rf.x                        : int  1 1 1 0 1 0 1 0 1 0 ...
##  $ rf_tuned.x                  : int  1 1 1 0 1 0 1 0 1 0 ...
##  $ xgb.x                       : num  0.961 0.96 0.829 0.344 0.942 ...
##  $ xgb_tuned.x                 : num  0.00345 0.01369 0.19118 0.65338 0.01415 ...
##  $ test.obesity_leveloverweight: int  1 1 1 0 1 0 1 0 1 0 ...</code></pre>
<div class="sourceCode" id="cb237"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb237-1"><a href="stacked-model-with-decision-tree-sm.html#cb237-1" tabindex="-1"></a><span class="fu">summary</span>(stacked)</span></code></pre></div>
<pre><code>##       lr.x         lr_complex.x        knn.x         knn_tuned.x    
##  Min.   :0.0023   Min.   :0.0000   Min.   :0.5000   Min.   :0.5000  
##  1st Qu.:0.5783   1st Qu.:0.5404   1st Qu.:0.7723   1st Qu.:0.7647  
##  Median :0.8975   Median :0.9210   Median :0.9109   Median :0.9375  
##  Mean   :0.7329   Mean   :0.7333   Mean   :0.8657   Mean   :0.8771  
##  3rd Qu.:0.9721   3rd Qu.:0.9855   3rd Qu.:0.9802   3rd Qu.:1.0000  
##  Max.   :0.9999   Max.   :1.0000   Max.   :1.0000   Max.   :1.0000  
##      ann.V1        ann_complex.V1         dt.x          dt_cost.x     
##  Min.   :0.08761   Min.   :0.04298   Min.   :0.0000   Min.   :0.0000  
##  1st Qu.:0.53668   1st Qu.:0.51153   1st Qu.:1.0000   1st Qu.:1.0000  
##  Median :0.90047   Median :0.91891   Median :1.0000   Median :1.0000  
##  Mean   :0.73205   Mean   :0.73173   Mean   :0.7505   Mean   :0.9323  
##  3rd Qu.:0.97776   3rd Qu.:0.97819   3rd Qu.:1.0000   3rd Qu.:1.0000  
##  Max.   :1.00227   Max.   :0.97998   Max.   :1.0000   Max.   :1.0000  
##  svm_vanilla.V1     svm_rbf.V1          rf.x          rf_tuned.x    
##  Min.   :0.0000   Min.   :0.0000   Min.   :0.0000   Min.   :0.0000  
##  1st Qu.:1.0000   1st Qu.:1.0000   1st Qu.:0.0000   1st Qu.:0.0000  
##  Median :1.0000   Median :1.0000   Median :1.0000   Median :1.0000  
##  Mean   :0.8216   Mean   :0.7658   Mean   :0.7354   Mean   :0.7327  
##  3rd Qu.:1.0000   3rd Qu.:1.0000   3rd Qu.:1.0000   3rd Qu.:1.0000  
##  Max.   :1.0000   Max.   :1.0000   Max.   :1.0000   Max.   :1.0000  
##      xgb.x          xgb_tuned.x        test.obesity_leveloverweight
##  Min.   :0.03182   Min.   :0.0002856   Min.   :0.0000              
##  1st Qu.:0.46929   1st Qu.:0.0034169   1st Qu.:0.0000              
##  Median :0.91454   Median :0.0383439   Median :1.0000              
##  Mean   :0.72143   Mean   :0.2662891   Mean   :0.7338              
##  3rd Qu.:0.96696   3rd Qu.:0.5447414   3rd Qu.:1.0000              
##  Max.   :0.97641   Max.   :0.9967414   Max.   :1.0000</code></pre>
<div class="sourceCode" id="cb239"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb239-1"><a href="stacked-model-with-decision-tree-sm.html#cb239-1" tabindex="-1"></a><span class="fu">head</span>(stacked)</span></code></pre></div>
<pre><code>##        lr.x lr_complex.x     knn.x knn_tuned.x    ann.V1 ann_complex.V1 dt.x
## 1 0.9732532  0.992295207 1.0000000       1.000 0.9669177      0.9735016    1
## 2 0.9734308  0.983365150 0.9801980       1.000 0.9700311      0.9750530    1
## 3 0.8874567  0.915903312 1.0000000       1.000 0.8897544      0.9113093    1
## 4 0.8500151  0.003275634 0.5544554       0.500 0.9200170      0.9433609    1
## 5 0.8139555  0.927113502 0.9108911       1.000 0.8385796      0.8531013    1
## 6 0.1298087  0.071669274 0.5544554       0.625 0.1988680      0.2216504    1
##   dt_cost.x svm_vanilla.V1 svm_rbf.V1 rf.x rf_tuned.x     xgb.x xgb_tuned.x
## 1         1              1          1    1          1 0.9609978 0.003453249
## 2         1              1          1    1          1 0.9600214 0.013690430
## 3         1              1          1    1          1 0.8291268 0.191177532
## 4         1              1          1    0          0 0.3436254 0.653379381
## 5         1              1          1    1          1 0.9424910 0.014147544
## 6         1              0          0    0          0 0.2844975 0.921427250
##   test.obesity_leveloverweight
## 1                            1
## 2                            1
## 3                            1
## 4                            0
## 5                            1
## 6                            0</code></pre>
</div>
<div id="split-data-1" class="section level2 hasAnchor" number="10.3">
<h2><span class="header-section-number">10.3</span> Split Data<a href="stacked-model-with-decision-tree-sm.html#split-data-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb241"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb241-1"><a href="stacked-model-with-decision-tree-sm.html#cb241-1" tabindex="-1"></a><span class="co"># Set seed for reproducibility</span></span>
<span id="cb241-2"><a href="stacked-model-with-decision-tree-sm.html#cb241-2" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">12345</span>)</span>
<span id="cb241-3"><a href="stacked-model-with-decision-tree-sm.html#cb241-3" tabindex="-1"></a></span>
<span id="cb241-4"><a href="stacked-model-with-decision-tree-sm.html#cb241-4" tabindex="-1"></a><span class="co"># Define training set ratio</span></span>
<span id="cb241-5"><a href="stacked-model-with-decision-tree-sm.html#cb241-5" tabindex="-1"></a>train_ratio <span class="ot">&lt;-</span> <span class="fl">0.70</span></span>
<span id="cb241-6"><a href="stacked-model-with-decision-tree-sm.html#cb241-6" tabindex="-1"></a></span>
<span id="cb241-7"><a href="stacked-model-with-decision-tree-sm.html#cb241-7" tabindex="-1"></a><span class="co"># Randomly sample training set</span></span>
<span id="cb241-8"><a href="stacked-model-with-decision-tree-sm.html#cb241-8" tabindex="-1"></a>train_rows <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(stacked), train_ratio <span class="sc">*</span> <span class="fu">nrow</span>(stacked))</span>
<span id="cb241-9"><a href="stacked-model-with-decision-tree-sm.html#cb241-9" tabindex="-1"></a></span>
<span id="cb241-10"><a href="stacked-model-with-decision-tree-sm.html#cb241-10" tabindex="-1"></a><span class="do">#### Logistics regression and Decision Tree Split</span></span>
<span id="cb241-11"><a href="stacked-model-with-decision-tree-sm.html#cb241-11" tabindex="-1"></a><span class="co"># Split data into training and testing sets</span></span>
<span id="cb241-12"><a href="stacked-model-with-decision-tree-sm.html#cb241-12" tabindex="-1"></a>train_sm <span class="ot">&lt;-</span> stacked[train_rows, ]</span>
<span id="cb241-13"><a href="stacked-model-with-decision-tree-sm.html#cb241-13" tabindex="-1"></a>test_sm <span class="ot">&lt;-</span> stacked[<span class="sc">-</span>train_rows, ]</span></code></pre></div>
</div>
<div id="define-cost-matrix" class="section level2 hasAnchor" number="10.4">
<h2><span class="header-section-number">10.4</span> Define Cost Matrix<a href="stacked-model-with-decision-tree-sm.html#define-cost-matrix" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb242"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb242-1"><a href="stacked-model-with-decision-tree-sm.html#cb242-1" tabindex="-1"></a><span class="co"># Build cost matrix</span></span>
<span id="cb242-2"><a href="stacked-model-with-decision-tree-sm.html#cb242-2" tabindex="-1"></a>cost_matrix <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">8</span>, <span class="dv">1</span>, <span class="dv">0</span>), <span class="at">nrow =</span> <span class="dv">2</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span>,</span>
<span id="cb242-3"><a href="stacked-model-with-decision-tree-sm.html#cb242-3" tabindex="-1"></a>                         <span class="at">dimnames =</span> <span class="fu">list</span>(<span class="at">Actual =</span> <span class="fu">c</span>(<span class="st">&#39;0&#39;</span>, <span class="st">&#39;1&#39;</span>),</span>
<span id="cb242-4"><a href="stacked-model-with-decision-tree-sm.html#cb242-4" tabindex="-1"></a>                                         <span class="at">Predicted =</span> <span class="fu">c</span>(<span class="st">&#39;0&#39;</span>, <span class="st">&#39;1&#39;</span>)))</span></code></pre></div>
</div>
<div id="model-sm" class="section level2 hasAnchor" number="10.5">
<h2><span class="header-section-number">10.5</span> Model SM<a href="stacked-model-with-decision-tree-sm.html#model-sm" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="simple-sm" class="section level3 hasAnchor" number="10.5.1">
<h3><span class="header-section-number">10.5.1</span> Simple SM<a href="stacked-model-with-decision-tree-sm.html#simple-sm" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb243"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb243-1"><a href="stacked-model-with-decision-tree-sm.html#cb243-1" tabindex="-1"></a><span class="co"># Build a model</span></span>
<span id="cb243-2"><a href="stacked-model-with-decision-tree-sm.html#cb243-2" tabindex="-1"></a>model_sm <span class="ot">&lt;-</span> <span class="fu">C5.0</span>(<span class="fu">as.factor</span>(test.obesity_leveloverweight) <span class="sc">~</span> .,</span>
<span id="cb243-3"><a href="stacked-model-with-decision-tree-sm.html#cb243-3" tabindex="-1"></a>                 <span class="at">data =</span> train_sm)</span></code></pre></div>
<div class="sourceCode" id="cb244"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb244-1"><a href="stacked-model-with-decision-tree-sm.html#cb244-1" tabindex="-1"></a><span class="co"># Display summary</span></span>
<span id="cb244-2"><a href="stacked-model-with-decision-tree-sm.html#cb244-2" tabindex="-1"></a><span class="fu">summary</span>(model_sm)</span></code></pre></div>
<pre><code>## 
## Call:
## C5.0.formula(formula = as.factor(test.obesity_leveloverweight) ~ ., data
##  = train_sm)
## 
## 
## C5.0 [Release 2.07 GPL Edition]      Wed Apr 17 04:42:18 2024
## -------------------------------
## 
## Class specified by attribute `outcome&#39;
## 
## Read 7265 cases (15 attributes) from undefined.data
## 
## Decision tree:
## 
## xgb_tuned.x &lt;= 0.2467366: 1 (4732/142)
## xgb_tuned.x &gt; 0.2467366:
## :...rf.x &gt; 0:
##     :...xgb_tuned.x &lt;= 0.3927872: 1 (318/100)
##     :   xgb_tuned.x &gt; 0.3927872:
##     :   :...ann.V1 &lt;= 0.8780381: 0 (267/117)
##     :       ann.V1 &gt; 0.8780381: 1 (43/11)
##     rf.x &lt;= 0:
##     :...xgb_tuned.x &gt; 0.868357: 0 (834/73)
##         xgb_tuned.x &lt;= 0.868357:
##         :...svm_rbf.V1 &gt; 0: 0 (375/118)
##             svm_rbf.V1 &lt;= 0:
##             :...dt.x &gt; 0:
##                 :...lr.x &lt;= 0.8343376: 0 (95/37)
##                 :   lr.x &gt; 0.8343376: 1 (5)
##                 dt.x &lt;= 0:
##                 :...lr.x &lt;= 0.5511828: 0 (517/129)
##                     lr.x &gt; 0.5511828:
##                     :...ann.V1 &gt; 0.9288083: 1 (4)
##                         ann.V1 &lt;= 0.9288083:
##                         :...lr.x &lt;= 0.6196184: 1 (30/11)
##                             lr.x &gt; 0.6196184: 0 (45/11)
## 
## 
## Evaluation on training data (7265 cases):
## 
##      Decision Tree   
##    ----------------  
##    Size      Errors  
## 
##      12  749(10.3%)   &lt;&lt;
## 
## 
##     (a)   (b)    &lt;-classified as
##    ----  ----
##    1648   264    (a): class 0
##     485  4868    (b): class 1
## 
## 
##  Attribute usage:
## 
##  100.00% xgb_tuned.x
##   34.87% rf.x
##   14.74% svm_rbf.V1
##    9.58% lr.x
##    9.58% dt.x
##    5.35% ann.V1
## 
## 
## Time: 0.0 secs</code></pre>
<div class="sourceCode" id="cb246"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb246-1"><a href="stacked-model-with-decision-tree-sm.html#cb246-1" tabindex="-1"></a><span class="fu">plot</span>(model_sm)</span></code></pre></div>
<p><img src="_main_files/figure-html/model_sm_summary-1.png" width="672" /></p>
<div class="sourceCode" id="cb247"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb247-1"><a href="stacked-model-with-decision-tree-sm.html#cb247-1" tabindex="-1"></a><span class="fu">varImp</span>(model_sm)</span></code></pre></div>
<pre><code>##                Overall
## xgb_tuned.x     100.00
## rf.x             34.87
## svm_rbf.V1       14.74
## lr.x              9.58
## dt.x              9.58
## ann.V1            5.35
## lr_complex.x      0.00
## knn.x             0.00
## knn_tuned.x       0.00
## ann_complex.V1    0.00
## dt_cost.x         0.00
## svm_vanilla.V1    0.00
## rf_tuned.x        0.00
## xgb.x             0.00</code></pre>
<p>According to the plot, it is apparent that the second-level stacked model relies solely on random forest as its predictor for decision making.</p>
</div>
<div id="sm-with-cost-matrix" class="section level3 hasAnchor" number="10.5.2">
<h3><span class="header-section-number">10.5.2</span> SM with Cost Matrix<a href="stacked-model-with-decision-tree-sm.html#sm-with-cost-matrix" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb249"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb249-1"><a href="stacked-model-with-decision-tree-sm.html#cb249-1" tabindex="-1"></a><span class="co"># Build a model</span></span>
<span id="cb249-2"><a href="stacked-model-with-decision-tree-sm.html#cb249-2" tabindex="-1"></a>model_sm_cost <span class="ot">&lt;-</span> <span class="fu">C5.0</span>(<span class="fu">as.factor</span>(test.obesity_leveloverweight) <span class="sc">~</span> .,</span>
<span id="cb249-3"><a href="stacked-model-with-decision-tree-sm.html#cb249-3" tabindex="-1"></a>                      <span class="at">data =</span> train_sm,</span>
<span id="cb249-4"><a href="stacked-model-with-decision-tree-sm.html#cb249-4" tabindex="-1"></a>                      <span class="at">costs =</span> cost_matrix)</span></code></pre></div>
<div class="sourceCode" id="cb250"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb250-1"><a href="stacked-model-with-decision-tree-sm.html#cb250-1" tabindex="-1"></a><span class="co"># Display summary</span></span>
<span id="cb250-2"><a href="stacked-model-with-decision-tree-sm.html#cb250-2" tabindex="-1"></a><span class="fu">summary</span>(model_sm_cost)</span></code></pre></div>
<pre><code>## 
## Call:
## C5.0.formula(formula = as.factor(test.obesity_leveloverweight) ~ ., data
##  = train_sm, costs = cost_matrix)
## 
## 
## C5.0 [Release 2.07 GPL Edition]      Wed Apr 17 04:42:18 2024
## -------------------------------
## 
## Class specified by attribute `outcome&#39;
## 
## Read 7265 cases (15 attributes) from undefined.data
## Read misclassification costs from undefined.costs
## 
## Decision tree:
## 
## dt_cost.x &gt; 0: 1 (6783/1474)
## dt_cost.x &lt;= 0:
## :...xgb.x &lt;= 0.08288926: 0 (246/4)
##     xgb.x &gt; 0.08288926: 1 (236/196)
## 
## 
## Evaluation on training data (7265 cases):
## 
##         Decision Tree       
##    -----------------------  
##    Size      Errors   Cost  
## 
##       3 1674(23.0%)   0.23   &lt;&lt;
## 
## 
##     (a)   (b)    &lt;-classified as
##    ----  ----
##     242  1670    (a): class 0
##       4  5349    (b): class 1
## 
## 
##  Attribute usage:
## 
##  100.00% dt_cost.x
##    6.63% xgb.x
## 
## 
## Time: 0.0 secs</code></pre>
<div class="sourceCode" id="cb252"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb252-1"><a href="stacked-model-with-decision-tree-sm.html#cb252-1" tabindex="-1"></a><span class="fu">plot</span>(model_sm_cost)</span></code></pre></div>
<p><img src="_main_files/figure-html/model_sm_cost_summary-1.png" width="672" /></p>
<div class="sourceCode" id="cb253"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb253-1"><a href="stacked-model-with-decision-tree-sm.html#cb253-1" tabindex="-1"></a><span class="fu">varImp</span>(model_sm_cost)</span></code></pre></div>
<pre><code>##                Overall
## dt_cost.x       100.00
## xgb.x             6.63
## lr.x              0.00
## lr_complex.x      0.00
## knn.x             0.00
## knn_tuned.x       0.00
## ann.V1            0.00
## ann_complex.V1    0.00
## dt.x              0.00
## svm_vanilla.V1    0.00
## svm_rbf.V1        0.00
## rf.x              0.00
## rf_tuned.x        0.00
## xgb_tuned.x       0.00</code></pre>
<p>Incorporating a cost matrix into our stacked model leads to observable differences. According to the plot, L1 DT model with cost matrix and RBF SVM have emerged as top predictors, while LR is now involved in decision making and ANN were implemented during the final stages.</p>
</div>
</div>
<div id="evaluate-sm" class="section level2 hasAnchor" number="10.6">
<h2><span class="header-section-number">10.6</span> Evaluate SM<a href="stacked-model-with-decision-tree-sm.html#evaluate-sm" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="simple-sm-1" class="section level3 hasAnchor" number="10.6.1">
<h3><span class="header-section-number">10.6.1</span> Simple SM<a href="stacked-model-with-decision-tree-sm.html#simple-sm-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb255"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb255-1"><a href="stacked-model-with-decision-tree-sm.html#cb255-1" tabindex="-1"></a><span class="co"># Make a prediction</span></span>
<span id="cb255-2"><a href="stacked-model-with-decision-tree-sm.html#cb255-2" tabindex="-1"></a>prediction_sm <span class="ot">&lt;-</span> <span class="fu">predict</span>(model_sm, test_sm)</span>
<span id="cb255-3"><a href="stacked-model-with-decision-tree-sm.html#cb255-3" tabindex="-1"></a>prediction_sm_prob <span class="ot">&lt;-</span> <span class="fu">predict</span>(model_sm, test_sm, <span class="at">type =</span> <span class="st">&#39;prob&#39;</span>)</span>
<span id="cb255-4"><a href="stacked-model-with-decision-tree-sm.html#cb255-4" tabindex="-1"></a></span>
<span id="cb255-5"><a href="stacked-model-with-decision-tree-sm.html#cb255-5" tabindex="-1"></a><span class="fu">summary</span>(prediction_sm)</span></code></pre></div>
<pre><code>##    0    1 
##  940 2174</code></pre>
<div class="sourceCode" id="cb257"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb257-1"><a href="stacked-model-with-decision-tree-sm.html#cb257-1" tabindex="-1"></a><span class="co"># Perform confusion matrix</span></span>
<span id="cb257-2"><a href="stacked-model-with-decision-tree-sm.html#cb257-2" tabindex="-1"></a>cm_sm <span class="ot">&lt;-</span> <span class="fu">confusionMatrix</span>(<span class="fu">as.factor</span>(prediction_sm),</span>
<span id="cb257-3"><a href="stacked-model-with-decision-tree-sm.html#cb257-3" tabindex="-1"></a>                         <span class="fu">as.factor</span>(test_sm<span class="sc">$</span>test.obesity_leveloverweight),</span>
<span id="cb257-4"><a href="stacked-model-with-decision-tree-sm.html#cb257-4" tabindex="-1"></a>                         <span class="at">positive =</span> <span class="st">&#39;1&#39;</span>)</span>
<span id="cb257-5"><a href="stacked-model-with-decision-tree-sm.html#cb257-5" tabindex="-1"></a>cm_sm</span></code></pre></div>
<pre><code>## Confusion Matrix and Statistics
## 
##           Reference
## Prediction    0    1
##          0  726  214
##          1  125 2049
##                                           
##                Accuracy : 0.8911          
##                  95% CI : (0.8797, 0.9019)
##     No Information Rate : 0.7267          
##     P-Value [Acc &gt; NIR] : &lt; 2.2e-16       
##                                           
##                   Kappa : 0.7346          
##                                           
##  Mcnemar&#39;s Test P-Value : 1.757e-06       
##                                           
##             Sensitivity : 0.9054          
##             Specificity : 0.8531          
##          Pos Pred Value : 0.9425          
##          Neg Pred Value : 0.7723          
##              Prevalence : 0.7267          
##          Detection Rate : 0.6580          
##    Detection Prevalence : 0.6981          
##       Balanced Accuracy : 0.8793          
##                                           
##        &#39;Positive&#39; Class : 1               
## </code></pre>
<p>Based on the confusion matrix, we observe that the model achieves an accuracy of <code>0.8911</code>, sensitivity of <code>0.9054</code>, and a Kappa coefficient of <code>0.7346</code>. We will assess these results towards the conclusion of the assignment when we have completed stacked models.</p>
<div class="sourceCode" id="cb259"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb259-1"><a href="stacked-model-with-decision-tree-sm.html#cb259-1" tabindex="-1"></a>pred <span class="ot">&lt;-</span> ROCR<span class="sc">::</span><span class="fu">prediction</span>(prediction_sm_prob[,<span class="dv">2</span>], test_sm<span class="sc">$</span>test.obesity_leveloverweight)</span>
<span id="cb259-2"><a href="stacked-model-with-decision-tree-sm.html#cb259-2" tabindex="-1"></a>perf <span class="ot">&lt;-</span> ROCR<span class="sc">::</span><span class="fu">performance</span>(pred, <span class="at">measure =</span> <span class="st">&quot;tpr&quot;</span>, <span class="at">x.measure =</span> <span class="st">&quot;fpr&quot;</span>)</span>
<span id="cb259-3"><a href="stacked-model-with-decision-tree-sm.html#cb259-3" tabindex="-1"></a>auc <span class="ot">&lt;-</span> ROCR<span class="sc">::</span><span class="fu">performance</span>(pred, <span class="at">measure=</span><span class="st">&quot;auc&quot;</span>)</span>
<span id="cb259-4"><a href="stacked-model-with-decision-tree-sm.html#cb259-4" tabindex="-1"></a></span>
<span id="cb259-5"><a href="stacked-model-with-decision-tree-sm.html#cb259-5" tabindex="-1"></a></span>
<span id="cb259-6"><a href="stacked-model-with-decision-tree-sm.html#cb259-6" tabindex="-1"></a>auc <span class="ot">&lt;-</span> <span class="fu">round</span>(auc<span class="sc">@</span>y.values[[<span class="dv">1</span>]],<span class="dv">3</span>)</span>
<span id="cb259-7"><a href="stacked-model-with-decision-tree-sm.html#cb259-7" tabindex="-1"></a>roc.data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">fpr=</span><span class="fu">unlist</span>(perf<span class="sc">@</span>x.values),</span>
<span id="cb259-8"><a href="stacked-model-with-decision-tree-sm.html#cb259-8" tabindex="-1"></a>                       <span class="at">tpr=</span><span class="fu">unlist</span>(perf<span class="sc">@</span>y.values),</span>
<span id="cb259-9"><a href="stacked-model-with-decision-tree-sm.html#cb259-9" tabindex="-1"></a>                       <span class="at">model=</span><span class="st">&quot;GLM&quot;</span>)</span>
<span id="cb259-10"><a href="stacked-model-with-decision-tree-sm.html#cb259-10" tabindex="-1"></a></span>
<span id="cb259-11"><a href="stacked-model-with-decision-tree-sm.html#cb259-11" tabindex="-1"></a><span class="fu">ggplot</span>(roc.data, <span class="fu">aes</span>(<span class="at">x=</span>fpr, <span class="at">ymin=</span><span class="dv">0</span>, <span class="at">ymax=</span>tpr)) <span class="sc">+</span></span>
<span id="cb259-12"><a href="stacked-model-with-decision-tree-sm.html#cb259-12" tabindex="-1"></a>    <span class="fu">geom_ribbon</span>(<span class="at">alpha=</span><span class="fl">0.2</span>, <span class="at">fill =</span> <span class="st">&quot;blue&quot;</span>) <span class="sc">+</span></span>
<span id="cb259-13"><a href="stacked-model-with-decision-tree-sm.html#cb259-13" tabindex="-1"></a>    <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y=</span>tpr), <span class="at">col =</span> <span class="st">&quot;blue&quot;</span>) <span class="sc">+</span></span>
<span id="cb259-14"><a href="stacked-model-with-decision-tree-sm.html#cb259-14" tabindex="-1"></a>    <span class="fu">geom_abline</span>(<span class="at">intercept =</span> <span class="dv">0</span>, <span class="at">slope =</span> <span class="dv">1</span>, <span class="at">lty =</span> <span class="st">&quot;dashed&quot;</span>) <span class="sc">+</span></span>
<span id="cb259-15"><a href="stacked-model-with-decision-tree-sm.html#cb259-15" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="fu">paste0</span>(<span class="st">&quot;Simple Stacked Model ROC Curve w/ AUC=&quot;</span>, auc)) <span class="sc">+</span></span>
<span id="cb259-16"><a href="stacked-model-with-decision-tree-sm.html#cb259-16" tabindex="-1"></a>    <span class="fu">theme_bw</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-17-1.png" width="672" /></p>
</div>
<div id="sm-with-cost-matrix-1" class="section level3 hasAnchor" number="10.6.2">
<h3><span class="header-section-number">10.6.2</span> SM with Cost Matrix<a href="stacked-model-with-decision-tree-sm.html#sm-with-cost-matrix-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb260"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb260-1"><a href="stacked-model-with-decision-tree-sm.html#cb260-1" tabindex="-1"></a><span class="co"># Make a prediction</span></span>
<span id="cb260-2"><a href="stacked-model-with-decision-tree-sm.html#cb260-2" tabindex="-1"></a>prediction_sm_cost <span class="ot">&lt;-</span> <span class="fu">predict</span>(model_sm_cost, test_sm)</span>
<span id="cb260-3"><a href="stacked-model-with-decision-tree-sm.html#cb260-3" tabindex="-1"></a><span class="fu">summary</span>(prediction_sm_cost)</span></code></pre></div>
<pre><code>##    0    1 
##  114 3000</code></pre>
<div class="sourceCode" id="cb262"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb262-1"><a href="stacked-model-with-decision-tree-sm.html#cb262-1" tabindex="-1"></a><span class="co"># Perform confusion matrix</span></span>
<span id="cb262-2"><a href="stacked-model-with-decision-tree-sm.html#cb262-2" tabindex="-1"></a>cm_sm_cost <span class="ot">&lt;-</span> <span class="fu">confusionMatrix</span>(<span class="fu">as.factor</span>(prediction_sm_cost),</span>
<span id="cb262-3"><a href="stacked-model-with-decision-tree-sm.html#cb262-3" tabindex="-1"></a>                              <span class="fu">as.factor</span>(test_sm<span class="sc">$</span>test.obesity_leveloverweight),</span>
<span id="cb262-4"><a href="stacked-model-with-decision-tree-sm.html#cb262-4" tabindex="-1"></a>                              <span class="at">positive =</span> <span class="st">&#39;1&#39;</span>)</span>
<span id="cb262-5"><a href="stacked-model-with-decision-tree-sm.html#cb262-5" tabindex="-1"></a>cm_sm_cost</span></code></pre></div>
<pre><code>## Confusion Matrix and Statistics
## 
##           Reference
## Prediction    0    1
##          0  112    2
##          1  739 2261
##                                           
##                Accuracy : 0.762           
##                  95% CI : (0.7467, 0.7769)
##     No Information Rate : 0.7267          
##     P-Value [Acc &gt; NIR] : 4.033e-06       
##                                           
##                   Kappa : 0.1791          
##                                           
##  Mcnemar&#39;s Test P-Value : &lt; 2.2e-16       
##                                           
##             Sensitivity : 0.9991          
##             Specificity : 0.1316          
##          Pos Pred Value : 0.7537          
##          Neg Pred Value : 0.9825          
##              Prevalence : 0.7267          
##          Detection Rate : 0.7261          
##    Detection Prevalence : 0.9634          
##       Balanced Accuracy : 0.5654          
##                                           
##        &#39;Positive&#39; Class : 1               
## </code></pre>
<p>Based on the confusion matrix, we observe that the model achieves an accuracy of <code>0.762</code>, sensitivity of <code>0.9991</code>, and a Kappa coefficient of <code>0.1791</code>. We will assess these results towards the conclusion of the assignment when we have completed stacked models.</p>
</div>
</div>
<div id="model-evaluations" class="section level2 hasAnchor" number="10.7">
<h2><span class="header-section-number">10.7</span> Model Evaluations<a href="stacked-model-with-decision-tree-sm.html#model-evaluations" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>With all models completed, we will now assess their performance and compile a comprehensive accuracy table that showcases essential metrics for each model. In subsequent stages, we will explore the business implications to determine the potential impact of our models.</p>
<div class="sourceCode" id="cb264"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb264-1"><a href="stacked-model-with-decision-tree-sm.html#cb264-1" tabindex="-1"></a><span class="co"># Load data</span></span>
<span id="cb264-2"><a href="stacked-model-with-decision-tree-sm.html#cb264-2" tabindex="-1"></a>file_paths <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb264-3"><a href="stacked-model-with-decision-tree-sm.html#cb264-3" tabindex="-1"></a>  <span class="st">&#39;Confusion Matrix/cm_lr.csv&#39;</span>,</span>
<span id="cb264-4"><a href="stacked-model-with-decision-tree-sm.html#cb264-4" tabindex="-1"></a>  <span class="st">&#39;Confusion Matrix/cm_lr_complex.csv&#39;</span>,</span>
<span id="cb264-5"><a href="stacked-model-with-decision-tree-sm.html#cb264-5" tabindex="-1"></a>  <span class="st">&#39;Confusion Matrix/cm_knn.csv&#39;</span>,</span>
<span id="cb264-6"><a href="stacked-model-with-decision-tree-sm.html#cb264-6" tabindex="-1"></a>  <span class="st">&#39;Confusion Matrix/cm_knn_tuned.csv&#39;</span>,</span>
<span id="cb264-7"><a href="stacked-model-with-decision-tree-sm.html#cb264-7" tabindex="-1"></a>  <span class="st">&#39;Confusion Matrix/cm_ann.csv&#39;</span>,</span>
<span id="cb264-8"><a href="stacked-model-with-decision-tree-sm.html#cb264-8" tabindex="-1"></a>  <span class="st">&#39;Confusion Matrix/cm_ann_complex.csv&#39;</span>,</span>
<span id="cb264-9"><a href="stacked-model-with-decision-tree-sm.html#cb264-9" tabindex="-1"></a>  <span class="st">&#39;Confusion Matrix/cm_dt.csv&#39;</span>,</span>
<span id="cb264-10"><a href="stacked-model-with-decision-tree-sm.html#cb264-10" tabindex="-1"></a>  <span class="st">&#39;Confusion Matrix/cm_dt_cost.csv&#39;</span>,</span>
<span id="cb264-11"><a href="stacked-model-with-decision-tree-sm.html#cb264-11" tabindex="-1"></a>  <span class="st">&#39;Confusion Matrix/cm_svm_vanilla.csv&#39;</span>,</span>
<span id="cb264-12"><a href="stacked-model-with-decision-tree-sm.html#cb264-12" tabindex="-1"></a>  <span class="st">&#39;Confusion Matrix/cm_svm_rbf.csv&#39;</span>,</span>
<span id="cb264-13"><a href="stacked-model-with-decision-tree-sm.html#cb264-13" tabindex="-1"></a>  <span class="st">&#39;Confusion Matrix/cm_rf.csv&#39;</span>,</span>
<span id="cb264-14"><a href="stacked-model-with-decision-tree-sm.html#cb264-14" tabindex="-1"></a>  <span class="st">&#39;Confusion Matrix/cm_rf_tuned.csv&#39;</span>,</span>
<span id="cb264-15"><a href="stacked-model-with-decision-tree-sm.html#cb264-15" tabindex="-1"></a>  <span class="st">&#39;Confusion Matrix/cm_xgb.csv&#39;</span>,</span>
<span id="cb264-16"><a href="stacked-model-with-decision-tree-sm.html#cb264-16" tabindex="-1"></a>  <span class="st">&#39;Confusion Matrix/cm_xgb_tuned.csv&#39;</span></span>
<span id="cb264-17"><a href="stacked-model-with-decision-tree-sm.html#cb264-17" tabindex="-1"></a>)</span>
<span id="cb264-18"><a href="stacked-model-with-decision-tree-sm.html#cb264-18" tabindex="-1"></a></span>
<span id="cb264-19"><a href="stacked-model-with-decision-tree-sm.html#cb264-19" tabindex="-1"></a><span class="co"># Store confusion matrices</span></span>
<span id="cb264-20"><a href="stacked-model-with-decision-tree-sm.html#cb264-20" tabindex="-1"></a>cms <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb264-21"><a href="stacked-model-with-decision-tree-sm.html#cb264-21" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(file_paths)) {</span>
<span id="cb264-22"><a href="stacked-model-with-decision-tree-sm.html#cb264-22" tabindex="-1"></a>  cm <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(file_paths[i])</span>
<span id="cb264-23"><a href="stacked-model-with-decision-tree-sm.html#cb264-23" tabindex="-1"></a>  cm_obj <span class="ot">&lt;-</span> <span class="fu">confusionMatrix</span>(<span class="fu">matrix</span>(<span class="fu">c</span>(cm[<span class="dv">1</span>,<span class="dv">1</span>],</span>
<span id="cb264-24"><a href="stacked-model-with-decision-tree-sm.html#cb264-24" tabindex="-1"></a>                                     cm[<span class="dv">1</span>,<span class="dv">2</span>],</span>
<span id="cb264-25"><a href="stacked-model-with-decision-tree-sm.html#cb264-25" tabindex="-1"></a>                                     cm[<span class="dv">2</span>,<span class="dv">1</span>],</span>
<span id="cb264-26"><a href="stacked-model-with-decision-tree-sm.html#cb264-26" tabindex="-1"></a>                                     cm[<span class="dv">2</span>,<span class="dv">2</span>]), </span>
<span id="cb264-27"><a href="stacked-model-with-decision-tree-sm.html#cb264-27" tabindex="-1"></a>                                   <span class="at">nrow =</span> <span class="dv">2</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span>), </span>
<span id="cb264-28"><a href="stacked-model-with-decision-tree-sm.html#cb264-28" tabindex="-1"></a>                            <span class="at">positive =</span> <span class="st">&#39;B&#39;</span>)</span>
<span id="cb264-29"><a href="stacked-model-with-decision-tree-sm.html#cb264-29" tabindex="-1"></a>  var_name <span class="ot">&lt;-</span> tools<span class="sc">::</span><span class="fu">file_path_sans_ext</span>(<span class="fu">basename</span>(file_paths[i]))</span>
<span id="cb264-30"><a href="stacked-model-with-decision-tree-sm.html#cb264-30" tabindex="-1"></a>  cms[[var_name]] <span class="ot">&lt;-</span> cm_obj</span>
<span id="cb264-31"><a href="stacked-model-with-decision-tree-sm.html#cb264-31" tabindex="-1"></a>}</span>
<span id="cb264-32"><a href="stacked-model-with-decision-tree-sm.html#cb264-32" tabindex="-1"></a></span>
<span id="cb264-33"><a href="stacked-model-with-decision-tree-sm.html#cb264-33" tabindex="-1"></a><span class="co"># Extract accuracy</span></span>
<span id="cb264-34"><a href="stacked-model-with-decision-tree-sm.html#cb264-34" tabindex="-1"></a>accuracy_table <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb264-35"><a href="stacked-model-with-decision-tree-sm.html#cb264-35" tabindex="-1"></a>  <span class="at">Model =</span> <span class="fu">c</span>(<span class="st">&#39;LR&#39;</span>, <span class="st">&#39;LR Complex&#39;</span>,</span>
<span id="cb264-36"><a href="stacked-model-with-decision-tree-sm.html#cb264-36" tabindex="-1"></a>            <span class="st">&#39;KNN&#39;</span>, <span class="st">&#39;KNN Tuned&#39;</span>,</span>
<span id="cb264-37"><a href="stacked-model-with-decision-tree-sm.html#cb264-37" tabindex="-1"></a>            <span class="st">&#39;ANN&#39;</span>, <span class="st">&#39;ANN Complex&#39;</span>,</span>
<span id="cb264-38"><a href="stacked-model-with-decision-tree-sm.html#cb264-38" tabindex="-1"></a>            <span class="st">&#39;DT&#39;</span>, <span class="st">&#39;DT with Cost&#39;</span>,</span>
<span id="cb264-39"><a href="stacked-model-with-decision-tree-sm.html#cb264-39" tabindex="-1"></a>            <span class="st">&#39;SVM Vanilla&#39;</span>, <span class="st">&#39;SVM RBF&#39;</span>,</span>
<span id="cb264-40"><a href="stacked-model-with-decision-tree-sm.html#cb264-40" tabindex="-1"></a>            <span class="st">&#39;RF&#39;</span>, <span class="st">&#39;RF Tuned&#39;</span>,</span>
<span id="cb264-41"><a href="stacked-model-with-decision-tree-sm.html#cb264-41" tabindex="-1"></a>            <span class="st">&#39;XGB&#39;</span>, <span class="st">&#39;XGB Tuned&#39;</span>,</span>
<span id="cb264-42"><a href="stacked-model-with-decision-tree-sm.html#cb264-42" tabindex="-1"></a>            <span class="st">&#39;SM&#39;</span>, <span class="st">&#39;SM with Cost&#39;</span>),</span>
<span id="cb264-43"><a href="stacked-model-with-decision-tree-sm.html#cb264-43" tabindex="-1"></a>  <span class="at">Accuracy =</span> <span class="fu">c</span>(</span>
<span id="cb264-44"><a href="stacked-model-with-decision-tree-sm.html#cb264-44" tabindex="-1"></a>    <span class="fu">round</span>(cms[[<span class="st">&#39;cm_lr&#39;</span>]]<span class="sc">$</span>overall[<span class="dv">1</span>], <span class="at">digits =</span> <span class="dv">4</span>),</span>
<span id="cb264-45"><a href="stacked-model-with-decision-tree-sm.html#cb264-45" tabindex="-1"></a>    <span class="fu">round</span>(cms[[<span class="st">&#39;cm_lr_complex&#39;</span>]]<span class="sc">$</span>overall[<span class="dv">1</span>], <span class="at">digits =</span> <span class="dv">4</span>),</span>
<span id="cb264-46"><a href="stacked-model-with-decision-tree-sm.html#cb264-46" tabindex="-1"></a>    <span class="fu">round</span>(cms[[<span class="st">&#39;cm_knn&#39;</span>]]<span class="sc">$</span>overall[<span class="dv">1</span>], <span class="at">digits =</span> <span class="dv">4</span>),</span>
<span id="cb264-47"><a href="stacked-model-with-decision-tree-sm.html#cb264-47" tabindex="-1"></a>    <span class="fu">round</span>(cms[[<span class="st">&#39;cm_knn_tuned&#39;</span>]]<span class="sc">$</span>overall[<span class="dv">1</span>], <span class="at">digits =</span> <span class="dv">4</span>),</span>
<span id="cb264-48"><a href="stacked-model-with-decision-tree-sm.html#cb264-48" tabindex="-1"></a>    <span class="fu">round</span>(cms[[<span class="st">&#39;cm_ann&#39;</span>]]<span class="sc">$</span>overall[<span class="dv">1</span>], <span class="at">digits =</span> <span class="dv">4</span>),</span>
<span id="cb264-49"><a href="stacked-model-with-decision-tree-sm.html#cb264-49" tabindex="-1"></a>    <span class="fu">round</span>(cms[[<span class="st">&#39;cm_ann_complex&#39;</span>]]<span class="sc">$</span>overall[<span class="dv">1</span>], <span class="at">digits =</span> <span class="dv">4</span>),</span>
<span id="cb264-50"><a href="stacked-model-with-decision-tree-sm.html#cb264-50" tabindex="-1"></a>    <span class="fu">round</span>(cms[[<span class="st">&#39;cm_dt&#39;</span>]]<span class="sc">$</span>overall[<span class="dv">1</span>], <span class="at">digits =</span> <span class="dv">4</span>),</span>
<span id="cb264-51"><a href="stacked-model-with-decision-tree-sm.html#cb264-51" tabindex="-1"></a>    <span class="fu">round</span>(cms[[<span class="st">&#39;cm_dt_cost&#39;</span>]]<span class="sc">$</span>overall[<span class="dv">1</span>], <span class="at">digits =</span> <span class="dv">4</span>),</span>
<span id="cb264-52"><a href="stacked-model-with-decision-tree-sm.html#cb264-52" tabindex="-1"></a>    <span class="fu">round</span>(cms[[<span class="st">&#39;cm_svm_vanilla&#39;</span>]]<span class="sc">$</span>overall[<span class="dv">1</span>], <span class="at">digits =</span> <span class="dv">4</span>),</span>
<span id="cb264-53"><a href="stacked-model-with-decision-tree-sm.html#cb264-53" tabindex="-1"></a>    <span class="fu">round</span>(cms[[<span class="st">&#39;cm_svm_rbf&#39;</span>]]<span class="sc">$</span>overall[<span class="dv">1</span>], <span class="at">digits =</span> <span class="dv">4</span>),</span>
<span id="cb264-54"><a href="stacked-model-with-decision-tree-sm.html#cb264-54" tabindex="-1"></a>    <span class="fu">round</span>(cms[[<span class="st">&#39;cm_rf&#39;</span>]]<span class="sc">$</span>overall[<span class="dv">1</span>], <span class="at">digits =</span> <span class="dv">4</span>),</span>
<span id="cb264-55"><a href="stacked-model-with-decision-tree-sm.html#cb264-55" tabindex="-1"></a>    <span class="fu">round</span>(cms[[<span class="st">&#39;cm_rf_tuned&#39;</span>]]<span class="sc">$</span>overall[<span class="dv">1</span>], <span class="at">digits =</span> <span class="dv">4</span>),</span>
<span id="cb264-56"><a href="stacked-model-with-decision-tree-sm.html#cb264-56" tabindex="-1"></a>    <span class="fu">round</span>(cms[[<span class="st">&#39;cm_xgb&#39;</span>]]<span class="sc">$</span>overall[<span class="dv">1</span>], <span class="at">digits =</span> <span class="dv">4</span>),</span>
<span id="cb264-57"><a href="stacked-model-with-decision-tree-sm.html#cb264-57" tabindex="-1"></a>    <span class="fu">round</span>(cms[[<span class="st">&#39;cm_xgb_tuned&#39;</span>]]<span class="sc">$</span>overall[<span class="dv">1</span>], <span class="at">digits =</span> <span class="dv">4</span>),</span>
<span id="cb264-58"><a href="stacked-model-with-decision-tree-sm.html#cb264-58" tabindex="-1"></a>    <span class="fu">round</span>(cm_sm<span class="sc">$</span>overall[<span class="dv">1</span>], <span class="at">digits =</span> <span class="dv">4</span>),</span>
<span id="cb264-59"><a href="stacked-model-with-decision-tree-sm.html#cb264-59" tabindex="-1"></a>    <span class="fu">round</span>(cm_sm_cost<span class="sc">$</span>overall[<span class="dv">1</span>], <span class="at">digits =</span> <span class="dv">4</span>)</span>
<span id="cb264-60"><a href="stacked-model-with-decision-tree-sm.html#cb264-60" tabindex="-1"></a>  ),</span>
<span id="cb264-61"><a href="stacked-model-with-decision-tree-sm.html#cb264-61" tabindex="-1"></a>  <span class="at">Sensitivity =</span> <span class="fu">c</span>(</span>
<span id="cb264-62"><a href="stacked-model-with-decision-tree-sm.html#cb264-62" tabindex="-1"></a>    <span class="fu">round</span>(cms[[<span class="st">&#39;cm_lr&#39;</span>]]<span class="sc">$</span>byClass[<span class="dv">1</span>], <span class="at">digits =</span> <span class="dv">4</span>),</span>
<span id="cb264-63"><a href="stacked-model-with-decision-tree-sm.html#cb264-63" tabindex="-1"></a>    <span class="fu">round</span>(cms[[<span class="st">&#39;cm_lr_complex&#39;</span>]]<span class="sc">$</span>byClass[<span class="dv">1</span>], <span class="at">digits =</span> <span class="dv">4</span>),</span>
<span id="cb264-64"><a href="stacked-model-with-decision-tree-sm.html#cb264-64" tabindex="-1"></a>    <span class="fu">round</span>(cms[[<span class="st">&#39;cm_knn&#39;</span>]]<span class="sc">$</span>byClass[<span class="dv">1</span>], <span class="at">digits =</span> <span class="dv">4</span>),</span>
<span id="cb264-65"><a href="stacked-model-with-decision-tree-sm.html#cb264-65" tabindex="-1"></a>    <span class="fu">round</span>(cms[[<span class="st">&#39;cm_knn_tuned&#39;</span>]]<span class="sc">$</span>byClass[<span class="dv">1</span>], <span class="at">digits =</span> <span class="dv">4</span>),</span>
<span id="cb264-66"><a href="stacked-model-with-decision-tree-sm.html#cb264-66" tabindex="-1"></a>    <span class="fu">round</span>(cms[[<span class="st">&#39;cm_ann&#39;</span>]]<span class="sc">$</span>byClass[<span class="dv">1</span>], <span class="at">digits =</span> <span class="dv">4</span>),</span>
<span id="cb264-67"><a href="stacked-model-with-decision-tree-sm.html#cb264-67" tabindex="-1"></a>    <span class="fu">round</span>(cms[[<span class="st">&#39;cm_ann_complex&#39;</span>]]<span class="sc">$</span>byClass[<span class="dv">1</span>], <span class="at">digits =</span> <span class="dv">4</span>),</span>
<span id="cb264-68"><a href="stacked-model-with-decision-tree-sm.html#cb264-68" tabindex="-1"></a>    <span class="fu">round</span>(cms[[<span class="st">&#39;cm_dt&#39;</span>]]<span class="sc">$</span>byClass[<span class="dv">1</span>], <span class="at">digits =</span> <span class="dv">4</span>),</span>
<span id="cb264-69"><a href="stacked-model-with-decision-tree-sm.html#cb264-69" tabindex="-1"></a>    <span class="fu">round</span>(cms[[<span class="st">&#39;cm_dt_cost&#39;</span>]]<span class="sc">$</span>byClass[<span class="dv">1</span>], <span class="at">digits =</span> <span class="dv">4</span>),</span>
<span id="cb264-70"><a href="stacked-model-with-decision-tree-sm.html#cb264-70" tabindex="-1"></a>    <span class="fu">round</span>(cms[[<span class="st">&#39;cm_svm_vanilla&#39;</span>]]<span class="sc">$</span>byClass[<span class="dv">1</span>], <span class="at">digits =</span> <span class="dv">4</span>),</span>
<span id="cb264-71"><a href="stacked-model-with-decision-tree-sm.html#cb264-71" tabindex="-1"></a>    <span class="fu">round</span>(cms[[<span class="st">&#39;cm_svm_rbf&#39;</span>]]<span class="sc">$</span>byClass[<span class="dv">1</span>], <span class="at">digits =</span> <span class="dv">4</span>),</span>
<span id="cb264-72"><a href="stacked-model-with-decision-tree-sm.html#cb264-72" tabindex="-1"></a>    <span class="fu">round</span>(cms[[<span class="st">&#39;cm_rf&#39;</span>]]<span class="sc">$</span>byClass[<span class="dv">1</span>], <span class="at">digits =</span> <span class="dv">4</span>),</span>
<span id="cb264-73"><a href="stacked-model-with-decision-tree-sm.html#cb264-73" tabindex="-1"></a>    <span class="fu">round</span>(cms[[<span class="st">&#39;cm_rf_tuned&#39;</span>]]<span class="sc">$</span>byClass[<span class="dv">1</span>], <span class="at">digits =</span> <span class="dv">4</span>),</span>
<span id="cb264-74"><a href="stacked-model-with-decision-tree-sm.html#cb264-74" tabindex="-1"></a>    <span class="fu">round</span>(cms[[<span class="st">&#39;cm_xgb&#39;</span>]]<span class="sc">$</span>byClass[<span class="dv">1</span>], <span class="at">digits =</span> <span class="dv">4</span>),</span>
<span id="cb264-75"><a href="stacked-model-with-decision-tree-sm.html#cb264-75" tabindex="-1"></a>    <span class="fu">round</span>(cms[[<span class="st">&#39;cm_xgb_tuned&#39;</span>]]<span class="sc">$</span>byClass[<span class="dv">1</span>], <span class="at">digits =</span> <span class="dv">4</span>),</span>
<span id="cb264-76"><a href="stacked-model-with-decision-tree-sm.html#cb264-76" tabindex="-1"></a>    <span class="fu">round</span>(cm_sm<span class="sc">$</span>byClass[<span class="dv">1</span>], <span class="at">digits =</span> <span class="dv">4</span>),</span>
<span id="cb264-77"><a href="stacked-model-with-decision-tree-sm.html#cb264-77" tabindex="-1"></a>    <span class="fu">round</span>(cm_sm_cost<span class="sc">$</span>byClass[<span class="dv">1</span>], <span class="at">digits =</span> <span class="dv">4</span>)</span>
<span id="cb264-78"><a href="stacked-model-with-decision-tree-sm.html#cb264-78" tabindex="-1"></a>  ),</span>
<span id="cb264-79"><a href="stacked-model-with-decision-tree-sm.html#cb264-79" tabindex="-1"></a>  <span class="at">Kappa =</span> <span class="fu">c</span>(</span>
<span id="cb264-80"><a href="stacked-model-with-decision-tree-sm.html#cb264-80" tabindex="-1"></a>    <span class="fu">round</span>(cms[[<span class="st">&#39;cm_lr&#39;</span>]]<span class="sc">$</span>overall[<span class="dv">2</span>], <span class="at">digits =</span> <span class="dv">4</span>),</span>
<span id="cb264-81"><a href="stacked-model-with-decision-tree-sm.html#cb264-81" tabindex="-1"></a>    <span class="fu">round</span>(cms[[<span class="st">&#39;cm_lr_complex&#39;</span>]]<span class="sc">$</span>overall[<span class="dv">2</span>], <span class="at">digits =</span> <span class="dv">4</span>),</span>
<span id="cb264-82"><a href="stacked-model-with-decision-tree-sm.html#cb264-82" tabindex="-1"></a>    <span class="fu">round</span>(cms[[<span class="st">&#39;cm_knn&#39;</span>]]<span class="sc">$</span>overall[<span class="dv">2</span>], <span class="at">digits =</span> <span class="dv">4</span>),</span>
<span id="cb264-83"><a href="stacked-model-with-decision-tree-sm.html#cb264-83" tabindex="-1"></a>    <span class="fu">round</span>(cms[[<span class="st">&#39;cm_knn_tuned&#39;</span>]]<span class="sc">$</span>overall[<span class="dv">2</span>], <span class="at">digits =</span> <span class="dv">4</span>),</span>
<span id="cb264-84"><a href="stacked-model-with-decision-tree-sm.html#cb264-84" tabindex="-1"></a>    <span class="fu">round</span>(cms[[<span class="st">&#39;cm_ann&#39;</span>]]<span class="sc">$</span>overall[<span class="dv">2</span>], <span class="at">digits =</span> <span class="dv">4</span>),</span>
<span id="cb264-85"><a href="stacked-model-with-decision-tree-sm.html#cb264-85" tabindex="-1"></a>    <span class="fu">round</span>(cms[[<span class="st">&#39;cm_ann_complex&#39;</span>]]<span class="sc">$</span>overall[<span class="dv">2</span>], <span class="at">digits =</span> <span class="dv">4</span>),</span>
<span id="cb264-86"><a href="stacked-model-with-decision-tree-sm.html#cb264-86" tabindex="-1"></a>    <span class="fu">round</span>(cms[[<span class="st">&#39;cm_dt&#39;</span>]]<span class="sc">$</span>overall[<span class="dv">2</span>], <span class="at">digits =</span> <span class="dv">4</span>),</span>
<span id="cb264-87"><a href="stacked-model-with-decision-tree-sm.html#cb264-87" tabindex="-1"></a>    <span class="fu">round</span>(cms[[<span class="st">&#39;cm_dt_cost&#39;</span>]]<span class="sc">$</span>overall[<span class="dv">2</span>], <span class="at">digits =</span> <span class="dv">4</span>),</span>
<span id="cb264-88"><a href="stacked-model-with-decision-tree-sm.html#cb264-88" tabindex="-1"></a>    <span class="fu">round</span>(cms[[<span class="st">&#39;cm_svm_vanilla&#39;</span>]]<span class="sc">$</span>overall[<span class="dv">2</span>], <span class="at">digits =</span> <span class="dv">4</span>),</span>
<span id="cb264-89"><a href="stacked-model-with-decision-tree-sm.html#cb264-89" tabindex="-1"></a>    <span class="fu">round</span>(cms[[<span class="st">&#39;cm_svm_rbf&#39;</span>]]<span class="sc">$</span>overall[<span class="dv">2</span>], <span class="at">digits =</span> <span class="dv">4</span>),</span>
<span id="cb264-90"><a href="stacked-model-with-decision-tree-sm.html#cb264-90" tabindex="-1"></a>    <span class="fu">round</span>(cms[[<span class="st">&#39;cm_rf&#39;</span>]]<span class="sc">$</span>overall[<span class="dv">2</span>], <span class="at">digits =</span> <span class="dv">4</span>),</span>
<span id="cb264-91"><a href="stacked-model-with-decision-tree-sm.html#cb264-91" tabindex="-1"></a>    <span class="fu">round</span>(cms[[<span class="st">&#39;cm_rf_tuned&#39;</span>]]<span class="sc">$</span>overall[<span class="dv">2</span>], <span class="at">digits =</span> <span class="dv">4</span>),</span>
<span id="cb264-92"><a href="stacked-model-with-decision-tree-sm.html#cb264-92" tabindex="-1"></a>    <span class="fu">round</span>(cms[[<span class="st">&#39;cm_xgb&#39;</span>]]<span class="sc">$</span>overall[<span class="dv">2</span>], <span class="at">digits =</span> <span class="dv">4</span>),</span>
<span id="cb264-93"><a href="stacked-model-with-decision-tree-sm.html#cb264-93" tabindex="-1"></a>    <span class="fu">round</span>(cms[[<span class="st">&#39;cm_xgb_tuned&#39;</span>]]<span class="sc">$</span>overall[<span class="dv">2</span>], <span class="at">digits =</span> <span class="dv">4</span>),</span>
<span id="cb264-94"><a href="stacked-model-with-decision-tree-sm.html#cb264-94" tabindex="-1"></a>    <span class="fu">round</span>(cm_sm<span class="sc">$</span>overall[<span class="dv">2</span>], <span class="at">digits =</span> <span class="dv">4</span>),</span>
<span id="cb264-95"><a href="stacked-model-with-decision-tree-sm.html#cb264-95" tabindex="-1"></a>    <span class="fu">round</span>(cm_sm_cost<span class="sc">$</span>overall[<span class="dv">2</span>], <span class="at">digits =</span> <span class="dv">4</span>)</span>
<span id="cb264-96"><a href="stacked-model-with-decision-tree-sm.html#cb264-96" tabindex="-1"></a>  )</span>
<span id="cb264-97"><a href="stacked-model-with-decision-tree-sm.html#cb264-97" tabindex="-1"></a>)</span>
<span id="cb264-98"><a href="stacked-model-with-decision-tree-sm.html#cb264-98" tabindex="-1"></a>accuracy_table <span class="ot">&lt;-</span> accuracy_table[<span class="fu">order</span>(accuracy_table<span class="sc">$</span>Accuracy, <span class="at">decreasing =</span> <span class="cn">TRUE</span>), ]</span>
<span id="cb264-99"><a href="stacked-model-with-decision-tree-sm.html#cb264-99" tabindex="-1"></a><span class="fu">rownames</span>(accuracy_table) <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb264-100"><a href="stacked-model-with-decision-tree-sm.html#cb264-100" tabindex="-1"></a></span>
<span id="cb264-101"><a href="stacked-model-with-decision-tree-sm.html#cb264-101" tabindex="-1"></a><span class="co"># Make table into kable</span></span>
<span id="cb264-102"><a href="stacked-model-with-decision-tree-sm.html#cb264-102" tabindex="-1"></a>kable_output <span class="ot">&lt;-</span> <span class="fu">kable</span>(accuracy_table, <span class="at">caption =</span> <span class="st">&quot;Accuracy Table by Model&quot;</span>, <span class="at">format =</span> <span class="st">&quot;html&quot;</span>) <span class="sc">|&gt;</span></span>
<span id="cb264-103"><a href="stacked-model-with-decision-tree-sm.html#cb264-103" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">&quot;striped&quot;</span>, <span class="st">&quot;hover&quot;</span>)) <span class="sc">|&gt;</span></span>
<span id="cb264-104"><a href="stacked-model-with-decision-tree-sm.html#cb264-104" tabindex="-1"></a>  <span class="fu">footnote</span>(<span class="at">general =</span> <span class="st">&quot;All metrics are calculated using the test set.&quot;</span>,</span>
<span id="cb264-105"><a href="stacked-model-with-decision-tree-sm.html#cb264-105" tabindex="-1"></a>           <span class="at">general_title =</span> <span class="st">&quot;Please Note:&quot;</span>,</span>
<span id="cb264-106"><a href="stacked-model-with-decision-tree-sm.html#cb264-106" tabindex="-1"></a>           <span class="at">footnote_as_chunk =</span> <span class="cn">TRUE</span>)</span>
<span id="cb264-107"><a href="stacked-model-with-decision-tree-sm.html#cb264-107" tabindex="-1"></a></span>
<span id="cb264-108"><a href="stacked-model-with-decision-tree-sm.html#cb264-108" tabindex="-1"></a>kable_output</span></code></pre></div>
<table class="table table-striped table-hover" style="margin-left: auto; margin-right: auto;border-bottom: 0;">
<caption>
<span id="tab:unnamed-chunk-18">Table 10.1: </span>Accuracy Table by Model
</caption>
<thead>
<tr>
<th style="text-align:left;">
Model
</th>
<th style="text-align:right;">
Accuracy
</th>
<th style="text-align:right;">
Sensitivity
</th>
<th style="text-align:right;">
Kappa
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
XGB Tuned
</td>
<td style="text-align:right;">
0.8930
</td>
<td style="text-align:right;">
0.9275
</td>
<td style="text-align:right;">
0.7258
</td>
</tr>
<tr>
<td style="text-align:left;">
SM
</td>
<td style="text-align:right;">
0.8911
</td>
<td style="text-align:right;">
0.9054
</td>
<td style="text-align:right;">
0.7346
</td>
</tr>
<tr>
<td style="text-align:left;">
RF
</td>
<td style="text-align:right;">
0.8899
</td>
<td style="text-align:right;">
0.9261
</td>
<td style="text-align:right;">
0.7176
</td>
</tr>
<tr>
<td style="text-align:left;">
RF Tuned
</td>
<td style="text-align:right;">
0.8885
</td>
<td style="text-align:right;">
0.9233
</td>
<td style="text-align:right;">
0.7150
</td>
</tr>
<tr>
<td style="text-align:left;">
XGB
</td>
<td style="text-align:right;">
0.8850
</td>
<td style="text-align:right;">
0.9266
</td>
<td style="text-align:right;">
0.7029
</td>
</tr>
<tr>
<td style="text-align:left;">
LR Complex
</td>
<td style="text-align:right;">
0.8717
</td>
<td style="text-align:right;">
0.9313
</td>
<td style="text-align:right;">
0.6603
</td>
</tr>
<tr>
<td style="text-align:left;">
DT
</td>
<td style="text-align:right;">
0.8683
</td>
<td style="text-align:right;">
0.9216
</td>
<td style="text-align:right;">
0.6560
</td>
</tr>
<tr>
<td style="text-align:left;">
LR
</td>
<td style="text-align:right;">
0.8668
</td>
<td style="text-align:right;">
0.9379
</td>
<td style="text-align:right;">
0.6411
</td>
</tr>
<tr>
<td style="text-align:left;">
ANN Complex
</td>
<td style="text-align:right;">
0.8667
</td>
<td style="text-align:right;">
0.9220
</td>
<td style="text-align:right;">
0.6508
</td>
</tr>
<tr>
<td style="text-align:left;">
ANN
</td>
<td style="text-align:right;">
0.8666
</td>
<td style="text-align:right;">
0.9263
</td>
<td style="text-align:right;">
0.6478
</td>
</tr>
<tr>
<td style="text-align:left;">
SVM RBF
</td>
<td style="text-align:right;">
0.8665
</td>
<td style="text-align:right;">
0.9308
</td>
<td style="text-align:right;">
0.6446
</td>
</tr>
<tr>
<td style="text-align:left;">
KNN Tuned
</td>
<td style="text-align:right;">
0.8579
</td>
<td style="text-align:right;">
0.9206
</td>
<td style="text-align:right;">
0.6248
</td>
</tr>
<tr>
<td style="text-align:left;">
KNN
</td>
<td style="text-align:right;">
0.8454
</td>
<td style="text-align:right;">
0.9304
</td>
<td style="text-align:right;">
0.5776
</td>
</tr>
<tr>
<td style="text-align:left;">
SVM Vanilla
</td>
<td style="text-align:right;">
0.8114
</td>
<td style="text-align:right;">
0.9313
</td>
<td style="text-align:right;">
0.4607
</td>
</tr>
<tr>
<td style="text-align:left;">
DT with Cost
</td>
<td style="text-align:right;">
0.7902
</td>
<td style="text-align:right;">
0.9923
</td>
<td style="text-align:right;">
0.2955
</td>
</tr>
<tr>
<td style="text-align:left;">
SM with Cost
</td>
<td style="text-align:right;">
0.7620
</td>
<td style="text-align:right;">
0.9991
</td>
<td style="text-align:right;">
0.1791
</td>
</tr>
</tbody>
<tfoot>
<tr>
<td style="padding: 0; " colspan="100%">
<span style="font-style: italic;">Please Note:</span> <sup></sup> All metrics are calculated using the test set.
</td>
</tr>
</tfoot>
</table>
<!-- ```{r profit_table} -->
<!-- # # List models -->
<!-- # model_names <- c('cm_lr', 'cm_lr_complex', 'cm_knn', 'cm_knn_tuned', 'cm_ann', 'cm_ann_complex', 'cm_dt', 'cm_dt_cost', 'cm_svm_vanilla', 'cm_svm_rbf', 'cm_rf', 'cm_rf_tuned') -->
<!-- #  -->
<!-- # # Input known parameters -->
<!-- # cost_per_call <- 1 -->
<!-- # revenue_per_successful_call <- 6 -->
<!-- #  -->
<!-- # # Initialize profits empty list -->
<!-- # profits <- list() -->
<!-- #  -->
<!-- # # Calculate L1 models profit and append to profits list -->
<!-- # for (model in model_names) { -->
<!-- #   total_calls <- cms[[model]]$table[2, 1] + cms[[model]]$table[2, 2] -->
<!-- #   success_percentage <- cms[[model]]$table[2, 2] / total_calls -->
<!-- #   total_revenue <- total_calls * success_percentage * revenue_per_successful_call -->
<!-- #   total_cost <- total_calls * cost_per_call -->
<!-- #   profit <- total_revenue - total_cost -->
<!-- #   profits[[model]] <- profit -->
<!-- # } -->
<!-- #  -->
<!-- # # Function to calculate stacked models profit -->
<!-- # calculate_profit <- function(cm, revenue_per_successful_call, cost_per_call, margin = 0.3) { -->
<!-- #     total_calls <- cm$table[2, 1] + cm$table[2, 2] -->
<!-- #     success_percentage <- cm$table[2, 2] / total_calls -->
<!-- #     total_revenue <- total_calls * success_percentage * revenue_per_successful_call -->
<!-- #     total_cost <- total_calls * cost_per_call -->
<!-- #     profit <- total_revenue - total_cost -->
<!-- #     return(round(profit / margin, digits = 0)) -->
<!-- # } -->
<!-- # profits[['cm_sm']] <- calculate_profit(cm_sm, revenue_per_successful_call, cost_per_call) -->
<!-- # profits[['cm_sm_cost']] <- calculate_profit(cm_sm_cost, revenue_per_successful_call, cost_per_call) -->
<!-- #  -->
<!-- # # Merge profit to accuracy table -->
<!-- # accuracy_table$Profit <- unlist(profits) -->
<!-- #  -->
<!-- # # Sort by Profit -->
<!-- # accuracy_table <- accuracy_table[order(accuracy_table$Profit, decreasing = TRUE), ] -->
<!-- # rownames(accuracy_table) <- NULL -->
<!-- #  -->
<!-- # # Make table into kable -->
<!-- # kable(accuracy_table, caption = 'Accuracy Table by Model') |> -->
<!-- #   footnote(general = 'All metrics are calculated using the test set.', -->
<!-- #            general_title = 'Please Note: ', -->
<!-- #            footnote_as_chunk = T) -->
<!-- ``` -->

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="xgboost-xgb.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="conclusion.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
